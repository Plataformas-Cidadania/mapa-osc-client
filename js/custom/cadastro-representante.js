"use strict";function validaNome(o){return!(o.length<5)}function validaEmail(o){return usuario=o.substring(0,o.indexOf("@")),dominio=o.substring(o.indexOf("@")+1,o.length),usuario.length>=1&&dominio.length>=3&&-1==usuario.search("@")&&-1==dominio.search("@")&&-1==usuario.search(" ")&&-1==dominio.search(" ")&&-1!=dominio.search(".")&&dominio.indexOf(".")>=1&&dominio.lastIndexOf(".")<dominio.length-1}function validaCNPJ(o){if(""==(o=o.toString().replace(/[^\d]+/g,""))||14!=o.length)return!1;for(tamanho=o.length-2,numeros=o.substring(0,tamanho),digitos=o.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);if(resultado=soma%11<2?0:11-soma%11,resultado!=digitos.charAt(0))return!1;for(tamanho+=1,numeros=o.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);return resultado=soma%11<2?0:11-soma%11,resultado==digitos.charAt(1)}function validaCPF(cpf){exp=/\.|\-/g,cpf=cpf.toString().replace(exp,"");var digitoDigitado=eval(cpf.charAt(9)+cpf.charAt(10)),soma1=0,soma2=0,vlr=11;for(i=0;i<9;i++)soma1+=eval(cpf.charAt(i)*(vlr-1)),soma2+=eval(cpf.charAt(i)*vlr),vlr--;soma1=10*soma1%11==10?0:10*soma1%11,soma2=10*(soma2+2*soma1)%11;var digitoGerado=10*soma1+soma2;return digitoGerado==digitoDigitado}function getErrorMessage(o,e){return 0===o.status?"Not connect.\n Verify Network.":404==o.status?"Requested page not found. [404]":500==o.status?"Internal Server Error [500].":"parsererror"===e?"Requested JSON parse failed.":"timeout"===e?"Time out error.":"abort"===e?"Ajax request aborted.":"Uncaught Error.\n"+o.responseText}function replaceSpecialChars(o){return o=o.replace(/[ÀÁÂÃÄÅ]/g,"A"),o=o.replace(/[àáâãäå]/g,"a"),o=o.replace(/[ÉÈÊË]/g,"E"),o=o.replace(/[éèêë]/g,"e"),o=o.replace(/[ÍÌÎÏ]/g,"I"),o=o.replace(/[íìîï]/g,"i"),o=o.replace(/[ÓÒÔÕ]/g,"O"),o=o.replace(/[óòôõ]/g,"o"),o=o.replace(/[ÚÙÛÜ]/g,"U"),o=o.replace(/[úùûü]/g,"u"),o=o.replace(/[Ç]/g,"C"),o=o.replace(/[ç]/g,"c")}require(["jquery-ui"],function(o){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(o,e){$(this).css(o),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}}}),$(".captcha iframe").attr("title","")}),require(["react","jsx!components/Util"],function(o){require(["componenteFormItem"],function(e){for(var r=["nome","email","cpf","senha","confirmarSenha"],a=["Nome","E-mail","CPF","Senha","Confirmar Senha"],s=["text","email","text","password","password"],t=[!0,!0,!0,!0,!0],l=[],n=0;n<r.length;n++)l.push(new function(o,e,r,a){this.id=o,this.label=e,this.type=r,this.obrigatorio=a,this.fonte=!1}(r[n],a[n],s[n],t[n]));e=o.createFactory(e),ReactDOM.render(e({header:"Informe seus dados de identificação.",dados:l}),document.getElementById("form-dados"))}),require(["jquery-ui","rotas"],function(o){var e="",r="",a=new Rotas,s=$("#modalMensagem");$("#cnpj.form-control").blur(function(o,t){validaCNPJ(r=$("#cnpj").val())?$.ajax({url:"js/controller.php",type:"GET",dataType:"json",data:{flag:"autocomplete",rota:a.AutocompleteOSCByCnpj(replaceSpecialChars(r).replace(/ /g,"+"),10)},success:function(o){o[0]?(jQuery("#entidadeLabel").text(o[0].tx_nome_osc),$("#entidadeLabel").removeClass("hide"),e=o[0].id_osc,$("#cnpj").closest(".form-group").removeClass("has-error").addClass("has-success")):($("#entidadeLabel").addClass("hide"),jQuery("#entidadeLabel").text(""),$("#cnpj").closest(".form-group").removeClass("has-success").addClass("has-error"),e="",r="",jQuery("#modalTitle").text("Erro"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text("Essa organização não se encontra em nosso mapa! "),s.modal("show"))},error:function(o,e){console.log(getErrorMessage(o,e))}}):(jQuery("#modalTitle").text("Erro"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text("Valor de CNPJ inválido!"),$("#cnpj").closest(".form-group").removeClass("has-success").addClass("has-error"),$("#entidadeLabel").addClass("hide"),jQuery("#entidadeLabel").text(""),s.modal("show"))}),$("#nome.form-control").blur(function(o,e){if(validaNome(this.value)){r="#"+$("#nome.form-control").attr("id")+"1";$("#nome.form-control").closest(".form-group").removeClass("has-error").addClass("has-success"),$(r).removeClass("glyphicon-remove").addClass("glyphicon-ok")}else{var r="#"+$("#nome.form-control").attr("id")+"1";$("#nome.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(r).removeClass("glyphicon-ok").addClass("glyphicon-remove")}}),$("#email.form-control").blur(function(o,e){if(validaEmail(this.value)){r="#"+$("#email.form-control").attr("id")+"1";$("#email.form-control").closest(".form-group").removeClass("has-error").addClass("has-success"),$(r).removeClass("glyphicon-remove").addClass("glyphicon-ok")}else{var r="#"+$("#email.form-control").attr("id")+"1";$("#email.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(r).removeClass("glyphicon-ok").addClass("glyphicon-remove")}}),$("#cpf.form-control").blur(function(o,e){if(validaCPF(this.value)){r="#"+$("#cpf.form-control").attr("id")+"1";$("#cpf.form-control").closest(".form-group").removeClass("has-error").addClass("has-success"),$(r).removeClass("glyphicon-remove").addClass("glyphicon-ok")}else{var r="#"+$("#cpf.form-control").attr("id")+"1";$("#cpf.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(r).removeClass("glyphicon-ok").addClass("glyphicon-remove")}}),$("#confirmarSenha.form-control").blur(function(o,e){this.value==$("#senha").val()?($("#senha.form-control").closest(".form-group").removeClass("has-error").addClass("has-success"),$("#confirmarSenha.form-control").closest(".form-group").removeClass("has-error").addClass("has-success")):($("#senha.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$("#confirmarSenha.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"))});$(".form-group").find(".btn.btn-success").on("click",function(){if(0==grecaptcha.getResponse().length)return jQuery("#labelCaptcha").text("Resolver o Captcha."),!1;jQuery("#labelCaptcha").text("");var o=$("#nome").val(),t=$("#email").val(),l=$("#cpf").val(),n=$("#senha").val(),c=$("#confirmarSenha").val(),i="";if($("#termoUso").is(":checked"))m=!0;else var m=!1;if($("#newsletter").is(":checked"))d=!0;else var d=!1;if(!validaCNPJ(r)||isNaN(e))return $("#cnpj").closest(".form-group").removeClass("has-success").addClass("has-error"),jQuery("#modalTitle").text("Erro"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text("Entidade não existe!"),s.modal("show"),!1;if(!validaNome(o))return i="#"+$("#nome.form-control").attr("id")+"1",$("#nome.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(i).removeClass("glyphicon-remove").addClass("glyphicon-ok"),!1;if(!validaEmail(t))return i="#"+$("#email.form-control").attr("id")+"1",$("#email.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(i).removeClass("glyphicon-ok").addClass("glyphicon-remove"),!1;if(!validaCPF(l))return i="#"+$("#cpf.form-control").attr("id")+"1",$("#cpf.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(i).removeClass("glyphicon-ok").addClass("glyphicon-remove"),!1;if(""==n||n!=c)return i="#"+$("#senha.form-control").attr("id")+"1",$("#senha.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(i).removeClass("glyphicon-ok").addClass("glyphicon-remove"),i="#"+$("#confirmarSenha.form-control").attr("id")+"1",$("#confirmarSenha.form-control").closest(".form-group").removeClass("has-success").addClass("has-error"),$(i).removeClass("glyphicon-ok").addClass("glyphicon-remove"),jQuery("#modalTitle").text("Problema no cadastro!"),jQuery("#modalConteudo").text("Os valores da senha e da confirmação são diferentes."),s.modal("show"),!1;if(!m)return i="#"+$("#termoUso.form-control").attr("id")+"1",$("#termoUso.form-control").closest(".form-group").removeClass("has-error").addClass("has-success"),$(i).removeClass("glyphicon-remove").addClass("glyphicon-ok"),jQuery("#modalTitle").text("Problema no cadastro!"),jQuery("#modalConteudo").text("É necessário concordar com os termos de uso."),s.modal("show"),!1;var u={tx_email_usuario:t,tx_senha_usuario:n,tx_nome_usuario:o,nr_cpf_usuario:l,bo_lista_email:d,representacao:[{id_osc:e}]};$.ajax({url:"js/controller.php",type:"POST",dataType:"json",data:{flag:"consultaPost",rota:a.CadastroRepresentante(),parametros:u},error:function(o){200==o.status?(jQuery("#modalTitle").text("Solicitação realizada com sucesso!"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text("Por favor, verifique o e-mail cadastrado.")):(jQuery("#modalTitle").text("Problema no cadastro!"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text(JSON.parse(o.responseText).msg)),s.modal("show")},success:function(o){jQuery("#modalTitle").text("Cadastro de Representante"),jQuery("#modalConteudo").text(""),jQuery("#modalConteudo").text(o.msg),s.modal("show")}})})})});