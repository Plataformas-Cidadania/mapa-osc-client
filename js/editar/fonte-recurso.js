"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var s=0;s<r.length;s++){var o=r[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,s,o){return s&&e(r.prototype,s),o&&e(r,o),r}}(),FonteRecurso=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"montarPorAno",value:function(e,r,s,o,n,t,c,a,i,u,p,d){var l=$.grep(t,function(e){return 1==e.cd_origem_fonte_recursos_osc}),_=$.grep(t,function(e){return 2==e.cd_origem_fonte_recursos_osc}),f=$.grep(t,function(e){return 4==e.cd_origem_fonte_recursos_osc}),h=$.grep(t,function(e){return 3==e.cd_origem_fonte_recursos_osc});$("#recursos").append("<div id="+e+"></div>"),0!==s&&$("#"+e).toggleClass("hidden");y=c.items;p=i.createFactory(p),u.render(p({dados:y,ano:e}),document.getElementById(e)),y=a.recursos_geral;for(var v=[],m=0;m<y.length;m++)v.push(n.FormItens("ano-"+e,y[m].label,e,y[m].fonte,y[m].placeholder,y[m].type,y[m].options,y[m].pretext,y[m].custom_class));d=i.createFactory(d),u.render(d({header:null,dados:v}),document.getElementById("recursos_geral-"+e)),a.recursos_nao_financeiros=this.mapContentRecursos(o.recursos_nao_financeiros,h),a.recursos_privados=this.mapContentRecursos(o.recursos_privados,_),a.recursos_proprios=this.mapContentRecursos(o.recursos_proprios,f),a.recursos_publicos=this.mapContentRecursos(o.recursos_publicos,l);for(var g=[{items:a.recursos_proprios,divId:"recursos_proprios"},{items:a.recursos_publicos,divId:"recursos_publicos"},{items:a.recursos_privados,divId:"recursos_privados"},{items:a.recursos_nao_financeiros,divId:"recursos_nao_financeiros"}],b=0;b<g.length;b++){for(var v=[],y=g[b].items,x=g[b].divId,m=0;m<y.length;m++){var k=y[m].content;""!==k&&null!==k&&-1===k.indexOf(".")&&(k+="00"),v.push(n.FormItens(y[m].id,y[m].label,k,y[m].fonte,y[m].placeholder,y[m].type,y[m].options,y[m].pretext))}d=i.createFactory(d),u.render(d({header:null,dados:v}),document.getElementById(x+"-"+e))}$("#recursos_proprios-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_proprios-"+e).find("input").addClass("with-pretext"),$("#recursos_proprios-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_publicos-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_publicos-"+e).find("input").addClass("with-pretext"),$("#recursos_publicos-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_privados-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_privados-"+e).find("input").addClass("with-pretext"),$("#recursos_privados-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_nao_financeiros-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_nao_financeiros-"+e).find("input").addClass("with-pretext"),$("#recursos_nao_financeiros-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_geral-"+e).append('<div class="input-box checkbox"><label><input type="checkbox">NÃ£o possui recursos para este ano.</label></div>'),r?$("#recursos_geral-"+e+' input[type="checkbox"]').prop("checked",!0):$("#recursos_geral-"+e+' input[type="checkbox"]').prop("checked",!1),$("#recursos_geral-"+e+' input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)})}},{key:"carregaFontes",value:function(e){var r=null;return $.ajax({url:"js/controller.php",async:!1,type:"GET",dataType:"json",data:{flag:"consulta",rota:e.FontesRecursos()},success:function(e){r=e},error:function(e){console.log(e)}}),r}},{key:"montarFontedeRecursos",value:function(e,r,s,o,n,t,c,a){for(var i=o.itemsRecurso(),u=o.tiposRecurso(),p=this.carregaFontes(s),d=0;d<e.recursos.recursos.length;d++)this.montarPorAno(e.recursos.recursos[d].dt_ano_recursos_osc,e.recursos.recursos[d].bo_nao_possui,d,e.recursos.recursos[d],r,p,i,u,n,t,c,a);$(".select-ano").find(".form-control").bind("change",function(){var e=$(this).val(),r=$(this).attr("id").slice(4);$("#"+e).hasClass("hidden")&&($("#"+e).toggleClass("hidden"),$("#"+e).siblings().addClass("hidden")),$(this).find("option[value="+r+"]").prop("selected",!0)})}},{key:"mapContentRecursos",value:function(e,r){for(var s=0;s<r.length;s++){var o=r[s];o.id=o.cd_fonte_recursos_osc,o.label=o.tx_nome_fonte_recursos_osc,o.content="",o.placeholder="Insira o valor";for(var n in e){var t=e[n];e.hasOwnProperty(n)&&t.cd_fonte_recursos_osc===o.cd_fonte_recursos_osc&&(o.content=t.nr_valor_recursos_osc)}}return r}}]),e}();