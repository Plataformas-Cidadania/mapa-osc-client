"use strict";require(["jquery-ui","libs/jquery-mask/jquery.mask.min"],function(e){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(e,o){$(this).css(e),$("<div>").addClass("arrow").addClass(o.vertical).addClass(o.horizontal).appendTo(this)}}}),$(".scroll").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:$(this.hash).offset().top},800)})}),require(["react","rotas","jsx!components/Util","jsx!components/EditarOSC","jquery","jquery-ui","datatables-responsive","editarCabecalho"],function(e){var o,a="js/controller.php",t=new DataForms,i=new Util,r=new Rotas,n=new Cabecalho,s=new DadosGerais,c=new AreaAtuacao,l=new Descricao,d=new TitulosCertificacoes,p=new RelacoesGovernanca,u=new EspacosPartSocial,_=new Projeto,h=new FonteRecurso,v=null,f={},b=0,m=3,j=1,g=0;require(["componenteFormItem","componenteCabecalho","componenteCheckbox","componenteSection","componenteAgrupador","componenteFormItemButtons","componenteAgrupadorInputProjeto","componenteAgrupadorConferencia","componenteAgrupadorConselhos","componenteTitulosCertificacoes","jquery","select-boxit"],function(x,O,k,y,C,S,R,P,A,w){function D(e,o,a){var t="";return $.ajax({url:e,async:a,type:"GET",dataType:"json",data:{flag:"consulta",rota:o},error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(e){t=e}}),t}function E(e,o,a){var t="";return $.ajax({url:e,async:a,type:"GET",dataType:"json",data:{flag:"autocomplete",rota:o},success:function(e){t=e},error:function(e){response([])}}),t}function T(e,o,a,t,i){$("#objetivosOsc-metas").append('<label title="Objetivo selecionado da ODS." class="label-objetivosOsc-'+t+'">Objetivo:</label>'),$("#objetivosOsc-metas").append('<div id="objetivosOsc" class="objetivosOsc objetivosOsc-'+t+'"></div>'),$(".objetivosOsc-"+t).append('<div class="form-group"><div id="objetivosOsc-'+t+'" for="'+t+'"><select class="form-control"></select></div></div>'),$("#objetivosOsc-"+t).append('<div id="metasOsc-'+t+'" class="metasOsc"></div>');var r=$("#objetivosOsc-metas").find("#metasOsc-"+t);t<=-1?r.append('<br><label title="Marque as metas que se enquadram neste projeto" style="display:none">Metas Relacionadas ao ODS definido:</label><br>'):r.append('<br><label title="Marque as metas que se enquadram neste projeto">Metas Relacionadas ao ODS definido:</label><br>'),r.append('<ol id="selectableOsc-'+t+'" class="selectable"></ol><br>'),function(e,o){var a=e,t=$("#objetivosOsc-"+o).find("select");-1==o?t.append('<option value=-1 selected id="0">Selecione uma opção...</option>'):t.append('<option value=-1 id="0">Selecione uma opção...</option>');for(var i=0;i<a.length;i++)a[i].cd_objetivo_projeto==o?t.append('<option selected id="'+a[i].cd_objetivo_projeto+'">'+a[i].tx_nome_objetivo_projeto+"</option>"):t.append('<option id="'+a[i].cd_objetivo_projeto+'">'+a[i].tx_nome_objetivo_projeto+"</option>")}(e,t),$("#objetivosOsc-"+t+" select").selectBoxIt({theme:"default",autoWidth:!1}),$("#objetivosOsc-"+t+" select").selectBoxIt("refresh");var n=[];if(-1!==a){for(var s=0;s<o.length;s++)if(t==o[s].cd_objetivo_osc){var c=o[s].cd_meta_osc;n.push(c)}M(t,n,i)}!function(e,o){$("#objetivosOsc-"+e).find("select").on("change",function(){var e=$(this).children(":selected").attr("id"),a=!1;$(".objetivosOsc").each(function(){$(this).hasClass("objetivosOsc-"+e)&&(a=!0)});var t=null;a?(t=$(this).parent().attr("for"),$("#metasOsc-"+t).remove()):(t=$(this).parent().attr("for"),$(this).parent().attr("for",e),$(".label-objetivosOsc-"+t).removeClass("label-objetivosOsc-"+t).addClass("label-objetivosOsc-"+e),$(".objetivosOsc-"+t).removeClass("objetivosOsc-"+t).addClass("objetivosOsc-"+e),$("#metasOsc-"+t).remove(),$(this).parent().append('<div id="metasOsc-'+e+'" class="metasOsc"></div>'),$("#metasOsc-"+e).append('<br><label title="Marque as metas que se enquadram neste projeto">Metas Relacionadas ao ODS definido</label><br>'),$("#metasOsc-"+e).append('<ol id="selectableOsc-'+e+'" class="selectable"></ol><br>'),0!==parseInt(e)&&M(e,[],o)),verificarContraste()})}(t,i)}function M(o,t,n){!function(o,a,t,r){if(i.validateObject(o,!1)){for(var n=function(e,o,a,t,i){this.id=e,this.label=o,this.value=a,this.type=t,this.checked=i},s=[],c=o,l=0;l<c.length;l++){var d=null;t.includes(c[l].cd_meta_projeto)?(d=new n(c[l].cd_meta_projeto,c[l].tx_nome_meta_projeto,c[l].cd_meta_projeto,"checkbox",!0),s.push(d)):(d=new n(c[l].cd_meta_projeto,c[l].tx_nome_meta_projeto,c[l].cd_meta_projeto,"checkbox",!1),s.push(d))}r=e.createFactory(r),ReactDOM.render(r({dados:s}),document.getElementById("selectableOsc-"+a))}var p=$("#metasOsc-"+a);p.append('<span class="input-group-btn"><button id="remover_objetivo_ods-'+a+'" for="'+a+'" class="btn-danger btn">Remover Objetivo</button></span>'),p.append("<hr>"),$("#remover_objetivo_ods-"+a).click(function(){var e=$(this).attr("for");$(".label-objetivosOsc-"+e).remove(),$(".objetivosOsc-"+e).remove(),$("#metasOsc-"+e).remove(),b--})}(D(a,r.MetaProjeto(o),!1),o,t,n)}function I(t,i,n,s,c){function l(e){var a,t=!1;"-1"==e&&(t=!0);var s=_.carregaProjeto(e,n,r,i,t);"Representante"==(s.projeto?s.projeto.projeto[0].ft_nome_projeto:"")?"Projeto excluído."==(o=i.carregaAjax(r.RemoverProjectByID(e,X),"POST",f)).msg?(a={"Removido com sucesso!":"Suas alterações serão processadas aproximadamente em 1(uma) hora.<br><br>Obrigado!"},i.abrirModalAjuda("Removido com sucesso!",a)):(a={"Problema ao remover projeto!":"Esse projeto possivelmente já foi removido.<br> Suas alterações serão processadas aproximadamente em 1(uma) hora.<br><br>Obrigado!"},i.abrirModalAjuda("Problema ao remover projeto!",a)):"-1"!=e?(a={"Problema ao remover projeto!":"Esse projeto possivelmente é um projeto de dados oficiais e não pode ser removido.<br> Suas alterações serão processadas aproximadamente em 1(uma) hora.<br><br>Obrigado!"},i.abrirModalAjuda("Problema ao remover projeto!",a)):(a={"Novo Projeto!":"Esse projeto possivelmente foi inseriodo agora!"},i.abrirModalAjuda("Erro ao remover projeto!",a))}var d=_.montarProjetos(t,i),p=d[0];y=e.createFactory(y),ReactDOM.render(y({dados:[p]}),document.getElementById("projetos")),$("#lista_projetos").append('<table id="table_lista_projetos" class="table-striped"></table>');var u=d[1],h=q(u);$("#table_lista_projetos tbody td").each(function(e){if(i.validateObject(u[e])){"Representante"==_.carregaProjeto(u[e][0],n,r,i,!1).projeto.projeto[0].ft_nome_projeto&&$(this).append('<button id="id_botao-projeto" attr="'+u[e][0]+'" class="btn-danger btn botao-projeto">Remover Projeto</button>')}}),$("#table_lista_projetos").append('<span class="input-group-btn"><button id="add_projeto" class="btn-primary btn">Adicionar Projeto</button></span>'),$("#table_lista_projetos tbody td").each(function(){$(this).prepend('<span class="glyphicon glyphicon-book" aria-hidden="true"></span> '),$(this).wrapInner("<div class='titulo-projeto'></div>")});var v=0;$("#add_projeto").click(function(){K(),h.row.add([-1,'<div class="titulo-projeto"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Novo Projeto']).draw(!1),verificarContraste()}),$("#table_lista_projetos").on("click",".titulo-projeto",function(){var e=$(this).parent().parent().get(0),o=!1,t=h.row(e).data()[0],c=$(this).next(".projeto");if(-1==t&&(o=!0,t=Number(t)-v,v+=1),c.length<1){var l=_.carregaProjeto(t,n,r,i,o),d=l.agrupadores,p=l.projeto,u=p?p.projeto[0].tx_identificador_projeto_externo:null,f="projeto-"+t;$(this).after('<div id="'+f+'" class="projeto col-md-12">'),z(d,t),function(e){var o=e[0],a=e[1],t=$(".projeto #area_atuacao input"),i=(new AreaAtuacao,0);t.addClass("autocomplete"),t.append('<div class="checkboxList"></div>');for(var r=0;r<o.length;r++){var n=o[r];t.find(".checkboxList").append("<div>");for(var s=0;s<a.length;s++){var c=a[s];n.cd_area_atuacao,c.cd_area_atuacao}}o=$.map(o,function(e){return{label:e.tx_nome_area_atuacao,value:e.tx_nome_area_atuacao,id:e.cd_area_atuacao}}),$(".projeto .autocomplete").autocomplete({minLength:0,create:function(e,a){for(var t=$(this).attr("placeholder"),i=0;i<o.length;i++){if(o[i].value===t){var r=$(this).siblings(".checkboxList").find("#subareas-"+i);r.hasClass("hidden")&&r.toggleClass("hidden");for(var n=0;n<o.length;n++)if(t===o[n].tx_nome_area_atuacao){var s=!1;r.find("label").each(function(){o[n].tx_nome_subarea_atuacao===$(this).text().trim()&&(s=$(this))}),s?s.find("input").prop("checked",!0):r.find("#outros").val(o[n].tx_nome_subarea_atuacao)}}}},source:o,change:function(e,o){},select:function(e,a){"macro_area_1"==e.target.id?($("#sub_area_1_outros").parent().parent().addClass("hidden"),$("#sub_area_1_outros").val(""),$(this).parent().find(":checkbox").prop("checked",!1)):($("#sub_area_2_outros").parent().parent().addClass("hidden"),$("#sub_area_2_outros").val(""),$(this).parent().find(":checkbox").prop("checked",!1));var t=e.target,r=o.indexOf(a.item)+1;i=r;var n=$($(t).siblings(".checkboxList")[0]);n.children().each(function(e){$(this).hasClass("hidden")||($(this).toggleClass("hidden"),$(this).children().each(function(e){var o=$($(this).find("input")[0]);o.is(":checked")&&o.prop("checked",!1),"text"==o.prop("type")&&o.val("")}))});var s=n.find("#subareas-"+r);s.hasClass("hidden")&&s.toggleClass("hidden");var c=a.item.value,l=$(this).closest(".form-group"),r=l.find(".autocomplete").attr("id"),d=null;if(d="macro_area_1"===r?l.siblings().find("#macro_area_1_outros").closest(".form-group"):l.siblings().find("#macro_area_2_outros").closest(".form-group"),"Outros"===c){if(d.toggleClass("hidden"),d.hasClass("hidden")){(p=d.find("input")).val("")}}else if(!d.hasClass("hidden")){d.toggleClass("hidden");var p=d.find("input");p.val("")}}}),$(".autocomplete").on("click",function(){$(this).autocomplete("search","")}),$(".autocomplete").keyup(function(){if(""===$(this).val()&&0!=i){var e=i,o=$(this).parent().find("#subareas-"+e);o.hasClass("hidden")||o.toggleClass("hidden")}})}(s),$("#"+f+" #nr_valor_total_projeto input").mask("000.000.000.000.000,00",{reverse:!0}),$("#"+f+" #nr_valor_total_projeto input").addClass("with-pretext"),$("#"+f+" #nr_valor_total_projeto input").before('<span class="pretext">R$</span>'),$("#"+f+" #nr_valor_captado_projeto input").mask("000.000.000.000.000,00",{reverse:!0}),$("#"+f+" #nr_valor_captado_projeto input").addClass("with-pretext"),$("#"+f+" #nr_valor_captado_projeto input").before('<span class="pretext">R$</span>'),$("#"+f+" #nr_total_beneficiarios input").mask("00000000"),$($("#"+f).find("div")[0]).attr("id",u),$(".local button.btn-primary").click(function(){W($("#tx_nome_abrangencia_projeto").find(":selected").text())}),$("#tx_nome_abrangencia_projeto").change(function(){W($(e).find(":selected").text())}),$(".tipo_parceria_projeto").addClass(function(e){return-1==e?"hidden":""}($("#"+f+" .tipo_parceria_projeto select").val())),$(".osc_parceira button.btn-primary").click(function(){J(function(){var e=0;return $(".osc_parceira input").each(function(){e+=1}),e-1}())}),$("#osc_parceira").find("input").autocomplete({source:function(e,o){var t=$(this)[0].term,n="",s="";if(H(t)){var c=E(a,r.AutocompleteOSCByCnpj(i.replaceSpecialChars(t).replace(/ /g,"+"),10),!1);null==c?$("#osc_parceira").find("input")[0].value="Entidade não cadastrada!":(n=c[0].tx_nome_osc,s=c[0].id_osc,$("#osc_parceira").find("input")[0].value=n,$("#osc_parceira").find("input")[0].id_osc_parceira=s)}else;}}),$("#"+f+" #fonte_recursos").on("change",".fonte_recurso select",function(e){var o=!1;$("#"+f+" #fonte_recursos .fonte_recurso select").each(function(){"Recursos públicos"!=$(this).val()&&"Recursos Públicos"!=$(this).val()||(o=!0)}),o?$("#"+f+" .tipo_parceria_projeto ").removeClass("hidden"):$("#"+f+" .tipo_parceria_projeto ").addClass("hidden")}),p?(L(p.projeto[0]),B(p.projeto[0],t)):B({},t),verificarContraste()}else $(this).next(".projeto").toggleClass("hidden")}),$("#table_lista_projetos_paginate").click(function(e){var o=$(".paginate_button.current").text();o=10*(o-1),0==$("#id_botao-projeto").length&&$("#table_lista_projetos tbody td").each(function(e){if(i.validateObject(u[e+o])){"Representante"==_.carregaProjeto(u[e+o][0],n,r,i,!1).projeto.projeto[0].ft_nome_projeto&&($(this).append('<button id="id_botao-projeto" attr="'+u[e+o][0]+'" class="btn-danger btn botao-projeto">Remover Projeto</button>'),$(this).prepend('<span class="glyphicon glyphicon-book" aria-hidden="true"></span> '))}0==$(this).find(".glyphicon").length&&$(this).prepend('<span class="glyphicon glyphicon-book" aria-hidden="true"></span> ')}),$(".botao-projeto").click(function(){l($(this).attr("attr"))}),verificarContraste()}),$(".botao-projeto").click(function(){l($(this).attr("attr")),verificarContraste()})}function q(e){return $("#table_lista_projetos").DataTable({responsive:!0,deferLoading:1e3,deferRender:!0,ordering:!1,data:e,columns:[{DT_RowId:"Id"},{title:"Nome do Projeto"}],order:[],aoColumnDefs:[{bSortable:!1,aTargets:[0]},{targets:[0],visible:!1,searchable:!1}],autoWidth:!0,oLanguage:t.oLanguageDataTable()})}function z(o,a){R=e.createFactory(R),ReactDOM.render(R({dados:o}),document.getElementById("projeto-"+a)),$(".date").datepicker({dateFormat:"dd-mm-yy",changeYear:!0}),$(".ano").datepicker({dateFormat:"yy"}),$("#projeto-"+a).on("click",".btn-danger",function(){$(this).parents(".input-group").remove()}),$("#projeto-"+a).find(".btn-primary").bind("click",function(){var e=$(this).parent()[0].parentElement.className;i.contains("fonte_recursos",e)?$(this).parent().siblings(".form-group").append("<div class=\"input-group fonte_recurso\"><div><select class='form-control'>              <option value='-1'>Selecione uma opção...</option>              <option value='Recursos públicos'>Recursos públicos</option>              <option value='Recursos privados'>Recursos privados</option>              <option value='Recursos próprios'>Recursos próprios</option>              <option value='Outros'>Outros</option></select></div><span class=\"input-group-btn\"><button class=\"btn-danger btn\">Remover 1</button></span></div>"):$(this).parent().siblings(".form-group").append('<div class="input-group"><div><input class="form-control" placeholder="Insira a informação"></input></div><span class="input-group-btn"><button class="btn-danger btn">Remover 2</button></span></div>')})}function L(e){for(var o,a=e.osc_parceira?e.osc_parceira.length:0,t=0;t<a;t++)o=i.validateObject(e.osc_parceira[t].id_osc,null),$("#osc_parceira").find("input")[t].id_osc_parceira=o}function B(e,o){var t=i.validateObject(e.objetivo_meta,""),n=i.validateObject(t[0],""),s=i.validateObject(n.tx_nome_objetivo_projeto,-1),c=i.validateObject(n.cd_objetivo_projeto,-1),l=[],d=[];if(-1!==s)for(h=0;h<t.length;h++){var p=t[h].cd_meta_projeto,u=t[h].tx_nome_objetivo_projeto;l.push(p),d.push(u)}for(var _={},h=0;h<t.length;h++)c=t[h].cd_objetivo_projeto,_[c]=t[h].tx_nome_objetivo_projeto;$.ajax({url:a,type:"GET",dataType:"json",data:{flag:"consulta",rota:r.Objetivos()},error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(a){if(""!=_)for(var t in _)N(o,_[t],t,l,a),Y(e,o,a);else N(o,"",c,l,a),Y(e,o,a);F(o,a)}})}function F(e,o){$("#projeto-"+e).append('<div class="col-md-12" id="objetivos-metas"><button id="id_botao-add-objetivo" class="btn-primary btn botao-add-objetivo">Adicionar ODS</button></div>'),$("#projeto-"+e).find(".botao-add-objetivo").on("click",function(){G($("#projeto-"+e),e,o,-1)})}function N(e,o,a,t,i){$("#projeto-"+e).append('<div class="col-md-12" id="objetivos-metas-'+a+'"</div>');var r=$("#projeto-"+e).find("#objetivos-metas-"+a);r.append('<div class="header" title="Indique se o PAP se relaciona com alguns dos objetivos do desenvolvimento sustentável, da ONU.">Objetivos do Desenvolvimento Sustentável - ODS - <a href="http://www.agenda2030.com.br/" target=_blank><img class="imgLinkExterno" src="img/site-ext.gif" width="17" height="11" alt="Site Externo." title="Site Externo." /></a> </div>'),r.append('<div class="form-group"><div id="objetivos-'+a+'"><select class="form-control"></select></div></div>');var n=r.find("select");-1==a?n.append('<option value=-1 selected id="0">Selecione uma opção...</option>'):n.append('<option value=-1 id="0">Selecione uma opção...</option>');for(var s=0;s<i.length;s++)i[s].cd_objetivo_projeto==a?n.append('<option selected id="'+i[s].cd_objetivo_projeto+'">'+i[s].tx_nome_objetivo_projeto+"</option>"):n.append('<option id="'+i[s].cd_objetivo_projeto+'">'+i[s].tx_nome_objetivo_projeto+"</option>");r.find("#objetivos-"+a+" select").selectBoxIt(),a&&V(a,t,e),r.find(".metas").each(function(){$(this).hasClass("hidden")||$(this).toggleClass("hidden")}),r.append('<div id="metas-'+e+a+'" class="metas"></div>'),r.find("#metas-"+e+a).append('<br><div class="header" title="Marque as metas que se enquadram neste projeto">Metas Relacionadas ao ODS definido</div><br>'),r.find("#metas-"+e+a).append('<ol id="selectable-'+e+"-"+a+"-"+g+'" class="selectable"></ol><br>'),r.find("#metas-"+e+a).hasClass("hidden")&&r.find("#metas-"+e+a).toggleClass("hidden"),(ee=$("#projeto-"+e).find("#metas-"+e+a)).append('<button id="id_botao-rem-objetivo-'+a+'" class="btn-danger btn botao-rem-objetivo">Remover ODS</button>'),ee.find(".botao-add-objetivo").on("click",function(){G(pro,ido,i,a)}),ee.find(".botao-rem-objetivo").on("click",function(){U($(this),ido)}),$("#projeto-"+e).append(r)}function U(e,o,a){g--,i.contains("objetivo",e.parent()[0].id)?e.parent().remove():e.parent().parent().remove(),$("#projeto-"+o).find(".botao-add-objetivo").length||F(o,a)}function G(e,o,a,t){g++;var r=i.validateObject(e.objetivo_meta,""),n=i.validateObject(r[0],""),s=[],c=[];if(-1!==i.validateObject(n.tx_nome_objetivo_projeto,-1))for(_=0;_<r.length;_++){var l=r[_].cd_meta_projeto,d=r[_].tx_nome_objetivo_projeto;s.push(l),c.push(d)}e.find(".botao-add-objetivo").remove(),e.append('<div class="col-md-12" id="objetivos-metas-'+t+'"</div>');var p=e.find("#objetivos-metas-"+t);p.append('<div class="header" title="Indique se o PAP se relaciona com alguns dos objetivos do desenvolvimento sustentável, da ONU.">Objetivos do Desenvolvimento Sustentável - ODS - <a href="http://www.agenda2030.com.br/" target=_blank><img class="imgLinkExterno" src="img/site-ext.gif" width="17" height="11" alt="Site Externo." title="Site Externo." /></a> </div>'),p.append('<div class="form-group"><div id="objetivos-'+t+'"><select class="form-control"></select></div></div>');var u=p.find("select");-1==t?u.append('<option value=-1 selected id="0">Selecione uma opção...</option>'):u.append('<option value=-1 id="0">Selecione uma opção...</option>');for(var _=0;_<a.length;_++)a[_].cd_objetivo_projeto==t?u.append('<option selected id="'+a[_].cd_objetivo_projeto+'">'+a[_].tx_nome_objetivo_projeto+"</option>"):u.append('<option id="'+a[_].cd_objetivo_projeto+'">'+a[_].tx_nome_objetivo_projeto+"</option>");p.find("#objetivos-"+t+" select").selectBoxIt(),t&&V(t,s,o),p.find("select").on("change",function(){t=$(this).children(":selected").attr("id"),p.find(".metas").each(function(){$(this).hasClass("hidden")||$(this).toggleClass("hidden")}),p.append('<div id="metas-'+o+t+'" class="metas"></div>'),p.find("#metas-"+o+t).append('<br><div class="header" title="Marque as metas que se enquadram neste projeto">Metas Relacionadas ao ODS definido</div><br>'),p.find("#metas-"+o+t).append('<ol id="selectable-'+o+"-"+t+"-"+g+'" class="selectable"></ol><br>'),p.find("#metas-"+o+t).hasClass("hidden")&&p.find("#metas-"+o+t).toggleClass("hidden"),0!==parseInt(t)&&V(t,[],o),p.append('<button id="id_botao-add-objetivo" class="btn-primary btn botao-add-objetivo">Adicionar ODS</button><button id="id_botao-rem-objetivo-'+t+'" class="btn-danger btn botao-rem-objetivo">Remover ODS</button>'),p.find(".botao-add-objetivo").on("click",function(){G(e,o,a,t)}),p.find(".botao-rem-objetivo").on("click",function(){U($(this),o,a)})}),$("#projeto-"+o).append(p),verificarContraste()}function V(o,t,n){var s=o;o<1&&(s=""),$.ajax({url:a,type:"GET",dataType:"json",data:{flag:"consulta",rota:r.MetaProjeto(s)},error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(a){!function(o,a,t,r){if(i.validateObject(o,!1)){for(var n=function(e,o,a,t,i){this.id=e,this.label=o,this.value=a,this.type=t,this.checked=i},s=[],c=o,l=0;l<c.length;l++){var d=null;t.includes(c[l].cd_meta_projeto)?(d=new n(c[l].cd_meta_projeto,c[l].tx_nome_meta_projeto,c[l].tx_nome_meta_projeto,"checkbox",!0),s.push(d)):(d=new n(c[l].cd_meta_projeto,c[l].tx_nome_meta_projeto,c[l].tx_nome_meta_projeto,"checkbox",!1),s.push(d))}k=e.createFactory(k),ReactDOM.render(k({dados:s}),document.getElementById("selectable-"+r+"-"+a+"-"+g))}}(a,o,t,n)}})}function Y(e,o,a){$(".objetivos").find("select").on("change",function(){var t=$(this).children(":selected").attr("id"),i=$(this).parents("#objetivos-metas");i.find(".metas").each(function(){$(this).hasClass("hidden")||$(this).toggleClass("hidden")}),i.find(".metas").remove(),i.append('<div id="metas-'+t+'" class="metas"></div>'),$("#metas-"+t).append('<br><div class="header" title="Marque as metas que se enquadram neste projeto">Metas Relacionadas ao ODS definido</div><br>'),$("#metas-"+t).append('<ol id="selectable-'+o+"-"+t+"-"+g+'" class="selectable"></ol><br>'),$("#metas-"+t).append('<button id="id_botao-add-objetivo" class="btn-primary btn botao-add-objetivo">Adicionar ODS</button><button id="id_botao-rem-objetivo-'+t+'" class="btn-danger btn botao-rem-objetivo">Remover ODS</button>'),$("#metas-"+t).find(".botao-add-objetivo").on("click",function(){G(e,o,a,t)}),$("#metas-"+t).find(".botao-rem-objetivo").on("click",function(){U($(this),o,a)}),$("#metas-"+t).hasClass("hidden")&&$("#metas-"+t).toggleClass("hidden"),0!==parseInt(t)&&(g++,V(t,[],o)),verificarContraste()})}function W(e){var o="",t=e.toLowerCase();$("#localizacao_projeto .form-control").autocomplete({minLength:3,source:function(e,n){if("estadual"==t||"municipal"==t?o=r.AutocompleteOSCByCounty(i.replaceSpecialChars(e.term).replace(/ /g,"+"),25):"regional"!=t&&"nacional"!=t||(o=r.AutocompleteOSCByState(i.replaceSpecialChars(e.term).replace(/ /g,"+"),10)),""!=o){var s=E(a,o,!1);n($.map(s,function(e){return"estadual"==t||"municipal"==t?{label:e.edmu_nm_municipio+" - "+e.eduf_sg_uf,value:e.edmu_nm_municipio+" - "+e.eduf_sg_uf,id:e.edmu_cd_municipio}:"regional"==t||"nacional"==t?{label:e.eduf_nm_uf,value:e.eduf_nm_uf,id:e.eduf_cd_uf}:void 0}))}}})}function H(e){if(""==(e=e.toString().replace(/[^\d]+/g,""))||14!=e.length)return!1;for(var o=e.length-2,a=e.substring(0,o),t=e.substring(o),i=0,r=o-7,n=o;n>=1;n--)i+=a.charAt(o-n)*r--,r<2&&(r=9);var s=i%11<2?0:11-i%11;if(s!=t.charAt(0))return!1;o+=1,a=e.substring(0,o),i=0,r=o-7;for(n=o;n>=1;n--)i+=a.charAt(o-n)*r--,r<2&&(r=9);return(s=i%11<2?0:11-i%11)==t.charAt(1)}function J(e){var o="",t="";$("#osc_parceira").find("input").autocomplete({source:function(n,s){var c=$(this)[0].term;if(H(c)){var l=E(a,r.AutocompleteOSCByCnpj(i.replaceSpecialChars(c).replace(/ /g,"+"),10),!1);null==l?$("#osc_parceira").find("input")[e].value="Entidade não cadastrada! ":(o=l[0].tx_nome_osc,t=l[0].id_osc,$("#osc_parceira").find("input")[e].value=o,$("#osc_parceira").find("input")[e].id_osc_parceira=t)}else;}})}function K(){function e(e){var o=[];return e.each(function(){var e=$(this).closest(".form-group"),a=$(this).val();if("-1"===a&&(a=""),void 0===e.attr("id")&&(e=$(this).parent()),$(this).closest(".metas").length>0){if(e=$(this).closest(".metas")[0],void 0===o.objetivo_meta&&(o.objetivo_meta=[]),$(this).prop("checked")){var t=a.split(" ")[0];o.objetivo_meta.push({cd_meta_projeto:t,tx_meta_projeto:a})}}else if("fonte_recursos"===e.attr("id"))void 0===o[e.attr("id")]&&(o[e.attr("id")]=[]),$(this).parent().parent().find("select").each(function(t){if("Recursos públicos"===(a=$(this).parent().parent().find("select")[t].value)){a=1;var i=null,r=null;$("div#tx_nome_tipo_parceria_projeto.form-group").parent().find("select").each(function(e){switch(i=$(this).parent().parent().find("select").val()){case"Termo de fomento":r=0;break;case"Termo de colaboração":r=1;break;case"Termo de parceria":r=2;break;case"Contrato de gestão":r=3;break;case"Convênio":r=4;break;case"Acordo de cooperação técnica":r=5;break;case"Outro":r=6;break;default:r=null}}),o[e.attr("id")].push({cd_origem_fonte_recursos_projeto:a,cd_tipo_parceria:r,tx_nome_tipo_parceria:i})}"Recursos privados"===a&&(a=2),"Recursos próprios"===a&&(a=3),"Outros"===a&&(a=4),-1==a&&(o[e.attr("id")]=null),null!=o[e.attr("id")]&&o[e.attr("id")].push({cd_origem_fonte_recursos_projeto:a,cd_tipo_parceria:null,tx_nome_tipo_parceria:null})});else if("area_atuacao_outra"===e.attr("id"))Array.isArray(o[e.attr("id")])?o[e.attr("id")].push({cd_area_atuacao_projeto:$(this).attr("id")?$(this).attr("id"):null,tx_area_atuacao_projeto:a}):(o[e.attr("id")]=[],o[e.attr("id")].push({cd_area_atuacao_projeto:$(this).attr("id")?$(this).attr("id"):null,tx_area_atuacao_projeto:a}));else if("objetivos"===e.attr("id"));else if("tx_nome_status_projeto"===e.attr("id")){var i=null;"Planejado"===a&&(i=1),"Em Execução"===a&&(i=2),"Finalizado"===a&&(i=3),o.cd_status_projeto=i}else if("tx_nome_abrangencia_projeto"===e.attr("id")){var r=null;"Municipal"===a&&(r=1),"Estadual"===a&&(r=2),"Regional"===a&&(r=3),"Nacional"===a&&(r=4),o.cd_abrangencia_projeto=r}else if("tx_nome_zona_atuacao"===e.attr("id")){var n=null;"Urbana"===a&&(n=1),"Rural"===a&&(n=2),o.cd_zona_atuacao_projeto=n}else if("localizacao_projeto"===e.attr("id")){var s=[],c={};(v=e.find("input")).each(function(){""!==$(this).val()&&((c={}).tx_nome_regiao_localizacao_projeto=$(this).val(),s.push(c))}),o.localizacao=s.length>0?s:null}else if("publico_beneficiado"===e.attr("id")){var l=[],d={};(v=e.find("input")).each(function(){""!==$(this).val()&&((d={}).tx_nome_publico_beneficiado=$(this).val(),l.push(d))}),o.publico_beneficiado=l.length>0?l:null}else if("financiador_projeto"===e.attr("id")){var p=[],u={};(v=e.find("input")).each(function(){""!==$(this).val()&&((u={}).tx_nome_financiador=$(this).val(),p.push(u))}),o.financiador_projeto=p.length>0?p:null}else if("osc_parceira"===e.attr("id")){var _=[],h={},v=e.find("input");v.each(function(){""!==$(this).val()&&((h={}).id_osc=$(this)[0].id_osc_parceira?$(this)[0].id_osc_parceira:null,_.push(h))}),o.osc_parceira=null==_?null:_.length>0?_:null}else o[e.attr("id")]=a}),o}var a=0;$(".projeto").each(function(){if(!$(this).hasClass("projeto-salvo")){var t=$(this).attr("id"),n=(t.substr(0,t.indexOf("-")),t.substr(t.indexOf("-")+1)),s=$($(this).find("div")[0]).attr("id");if(a=Number(n),s=s||null,f=$.extend({},f,e($(this).find("input"))),f=$.extend({},f,e($(this).find("textarea"))),void 0===(f=$.extend({},f,e($(this).find("select")))).objetivo_meta&&(f.objetivo_meta=null),a<0){f.id_projeto=null,f.tx_identificador_projeto_externo=s;var c=["localizacao","publico_beneficiado","financiador_projeto","osc_parceira"];c.map(function(e){f.hasOwnProperty(e)||(f[e]=null)}),"Projeto adicionado."===(o=i.carregaAjax(r.CriarProjectByID(X),"POST",f)).msg&&($(this).addClass("hidden"),$(this).addClass("projeto-salvo"),$(this).prev().append(" - "+f.tx_nome_projeto))}else f.id_projeto=a,f.tx_identificador_projeto_externo=s,(c=["localizacao","publico_beneficiado","financiador_projeto","osc_parceira"]).map(function(e){f.hasOwnProperty(e)||(f[e]=null)}),o=i.carregaAjax(r.AtualizarProjectByID(X),"POST",f)}})}var Q=void 0!==window.location.href.split("#")[1]?window.location.href.split("#/")[1].split("="):null,X="";null!==Q&&(X=Q[0],i.verificarPermissao(X)||(window.location.href="visualizar-osc.html#/"+X),function(e){$(".btnVisualizar").append('<a id="btnVisualizar" type="button" title="Clique para Visualizar"  class="btn btn-info btn-sm"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Visualizar OSC</a>'),$("#btnVisualizar").attr("href","visualizar-osc.html#/"+e)}(X),function(e){$("#voltaEditar").attr("href","editar-osc.html#/"+e),-1==document.referrer.indexOf("minhas-oscs")?($("#voltaPagAnterior").text("Visualizar"),$("#voltaPagAnterior").attr("href","visualizar-osc.html#/"+e)):($("#voltaPagAnterior").text("Lista de OSCs"),$("#voltaPagAnterior").attr("href","minhas-oscs.html"))}(X),r.OSCByID_no_project(X));var Z={User:window.localStorage.getItem("User"),Authorization:window.localStorage.getItem("Authorization")},ee="";f.headers=Z,f.id_osc=X,$.ajax({url:a,type:"GET",dataType:"json",data:{flag:"consulta",rota:r.OSCByID_no_project(X)},error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(o){n.montarCabecalho(o,i,e,ReactDOM,O),v=o,s.montarDadosGerais(o,i,t,e,ReactDOM,x,k),function(e,o){for(var t=i.validateObject(e.dados_gerais.objetivo_metas,""),n={},s=0;s<t.length;s++)n[t[s].cd_objetivo_osc]=t[s].tx_nome_objetivo_osc;var c=$("#dados_gerais");if(c.append('<label title="Indique se o PAP se relaciona com alguns dos objetivos do desenvolvimento sustentável, da ONU. Máximo três objetivos.">Objetivos do Desenvolvimento Sustentável - ODS - <a href="http://www.agenda2030.com.br/" target=_blank><img class="imgLinkExterno" src="img/site-ext.gif" width="17" height="11" alt="Site Externo." title="Site Externo." /></a> </label>'),c.append('<div class="form-group" id="objetivosOsc-metas"</div>'),$("#objetivosOsc-metas").append('<span class="input-group-btn"><button id="add_objetivo_ods" class="btn-primary btn">Adicionar Objetivo</button></span>'),e=D(a,r.Objetivos(),!1),""==t)T(e,"",-1,-1,o),b++,j++;else for(var l in n)T(e,t,i.validateObject(n[l],-1),l,o),b++;$("#add_objetivo_ods").click(function(){b<m&&(T(D(a,r.Objetivos(),!1),"",-1,-j,o),b++,j++)})}(o,k);var _=i.validateObject(o.dados_gerais.tx_nome_atividade_economica_osc,""),f=i.validateObject(o.dados_gerais.ft_atividade_economica_osc,""),g=c.montarAreasDeAtuacao(o,i,t,r,_,f,e,ReactDOM,x);l.montarDescricao(o,i,t,e,ReactDOM,x),d.montarTitulosCertificacoes(o,i,e,ReactDOM,x,w);var R=p.montarRelacoesGovernanca(o,i,t);p.ativarTrabalhoGovernanca(t,R,e,ReactDOM,y,C,x,S,i);var E=u.iniciarEspacosPartSoc(o,i,t,y,e,ReactDOM,r.Conselho(),r.Conferencia(),r.PeriodicidadeReuniao(),r.Titularidade(),r.FormaParticipacaoConferencia());u.ativarEspacosPart(E,i,e,ReactDOM,C,A,P,S),function(e){$("#novo_titulo_certificacao_botao").parent().append('<div class="input-box checkbox"><label><input type="checkbox">Não possui títulos e certificações.</label></div>');var o=i.validateObject(e.certificado,0);$('#certificacoes input[type="checkbox"]').prop("checked",o.bo_nao_possui_certificacoes),$('#certificacoes input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$("#conselhos").prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui conselhos de políticas públicas.</label></div>'),$("#conferencias").prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui conferências de políticas públicas.</label></div>'),$("#outros_part").prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui outros espaços de participação social.</label></div>');var a=i.validateObject(e.participacao_social,0);$('#conselhos input[type="checkbox"]').prop("checked",a.bo_nao_possui_conselhos),$('#conferencias input[type="checkbox"]').prop("checked",a.bo_nao_possui_conferencias),$('#outros_part input[type="checkbox"]').prop("checked",a.bo_nao_possui_outros_part),$('#conselhos input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$('#conferencias input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$('#outros_part input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)})}(o),I(o,i,t,g),h.montarFontedeRecursos(o,i,r,t,e,ReactDOM,y,x),verificarContraste(),function(){var e=t.jsonModalAjuda();$(".ajuda").on("click",function(){i.abrirModalAjuda($(this).attr("data"),e)})}(),$(".date").datepicker({dateFormat:"dd-mm-yy",changeYear:!0}),$(function(){$(".ano").datepicker({changeYear:!0,showButtonPanel:!0,dateFormat:"yy",yearRange:"1900:2017",onClose:function(e,o){var a=$("#ui-datepicker-div .ui-datepicker-year :selected").val();$(this).datepicker("setDate",new Date(a,1))}}),$(".ano").focus(function(){$(".ui-datepicker-calendar").hide(),$(".ui-datepicker-month").hide(),$(".ui-datepicker-prev").hide(),$(".ui-datepicker-next").hide()}),$("#tx_telefone input.form-control").focusout(function(e){var o,a,t;a=(o=e.currentTarget?e.currentTarget:e.srcElement).value.replace(/\D/g,""),(t=$(o)).unmask(),11===a.length?0==a[0]?t.mask("9999 999 9999"):t.mask("(99) 99999-9999"):10===a.length?t.mask("(99) 9999-9999"):9===a.length?t.mask("(99) 999-9999"):8===a.length?t.mask("9999-9999"):7===a.length&&t.mask("999-9999")}),$("#tx_telefone input.form-control").focusin(function(e){var o;o=e.currentTarget?e.currentTarget:e.srcElement,$(o).unmask()})}),$("#bodyheaderTitulosCertificacoes td.sorting_1").click(function(){$(".remove_titulo_certificacao").attr("data");$("#tabela_titulos_certificados").DataTable().destroy()}),$("#btnInserirImg").append('<label class="custom-file-upload btn btn-info" title="Clique para Inserir o Logo da OSC"><input id="inserirLogo" type="file" accept="image/x-png,image/gif,image/jpeg" /><i class="fa fa-cloud-upload"></i>Inserir Logo</label>'),$("#btnRemoverImg").append('<a class="btn btn-danger btn-sm" id="btnRemoverLogo" type="button" title="Clique para Remover o Logo da OSC" ><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Remover Logo</a>'),$(".custom-file-upload").on("change",function(){$(".alert").addClass("hide"),$("input[type=file]").each(function(e){""!=$("input[type=file]").eq(e).val()&&function(e){if(e.files&&e.files[0]&&e.files[0].type.match("image.*")&&e.files[0].size<1e6){var o=document.createElement("img"),a=document.createElement("canvas"),t=new FileReader;t.onload=function(e){o.src=e.target.result,o.onload=function(){var e=o.width,t=o.height;e>t?e>300&&(t*=300/e,e=300):t>225&&(e*=225/t,t=225),a.width=e,a.height=t,a.getContext("2d").drawImage(o,0,0,e,t);var i=a.toDataURL("image/png");$("#imagemLogo").attr("src",i)}},t.readAsDataURL(e.files[0])}else $("#errorLabel").removeClass("hide")}(this)})}),$("#btnRemoverLogo").click(function(){$("#imagemLogo").attr("src","img/camera.jpg"),$("input[type=file]").eq(0).val("")}),$("#loading").hide(),$(".conteudo_loading .section").css("visibility","visible")}}),$("#cancelar").click(function(){window.location.href="/visualizar-osc.html#/"+X}),$("#salvar").click(function(){_={};(_=i.validateObject(v.dados_gerais,[])).headers=Z,_.id_osc=X,$("#dados_gerais :input").each(function(){var e=$(this).attr("id"),o=$(this).val();"tx_nome_situacao_imovel_osc"===e?(_.cd_situacao_imovel_osc=null,"Próprio"===o&&(_.cd_situacao_imovel_osc=1),"Alugado"===o&&(_.cd_situacao_imovel_osc=2),"Cedido"===o&&(_.cd_situacao_imovel_osc=3),"Comodato"===o&&(_.cd_situacao_imovel_osc=4)):_[e]=o}),_.objetivo_metas=[],$("#objetivosOsc-metas :input[type='checkbox']").each(function(){if($(this).prop("checked")){var e=$(this).attr("value");_.objetivo_metas.push({cd_meta_osc:e})}});var e=$("#imagemLogo").attr("src");_.im_logo="img/camera.jpg"==e||null==e||void 0==e?null:e,i.carregaAjax(r.DadosGerais(X),"POST",_),(_=i.validateObject(v.area_atuacao,{})).headers=Z,_.id_osc=X,_.area_atuacao=[];var o=t.getSuggestions();$("#areas_de_atuacao .autocomplete").each(function(){for(var e=0,a=0;a<o.length;a++)$(this).val().trim().toLowerCase()===o[a].tx_nome_area_atuacao.trim().toLowerCase()&&(e=o[a].cd_area_atuacao);var t=$(this).attr("id").substring(11),i=$("#macro_area_"+t+"_outros").val(),r={cd_area_atuacao:e.toString(),tx_nome_area_atuacao_outra:"Outros"===$(this).val()?i:null},n=[];$(this).siblings(".checkboxList").children(":not(.hidden)").each(function(e){$(this).find("input:checked").each(function(){$(this).closest("label").text();var e="Outros"===$(this).closest("label").text();n.push({tx_nome_subarea_atuacao_outra:e?$("#sub_area_"+t+"_outros").val():null,cd_subarea_atuacao:$(this).val()})}),n.length<=0&&(n=null),r.subarea_atuacao=n,_.area_atuacao.push(r)}),0==_.area_atuacao.length&&_.area_atuacao.push({cd_area_atuacao:0,tx_nome_area_atuacao_outra:null,subarea_atuacao:null})}),i.carregaAjax(r.AtualizarAreaAtuacao(X),"POST",_),(_=i.validateObject(v.descricao,{})).headers=Z,_.id_osc=X,_.descricao=[],$("#descricao .form-control").each(function(){_[$(this).attr("id")]=$(this).val()}),i.carregaAjax(r.Descricao(X),"POST",_),(_=i.validateObject(v.certificado,{})).headers=Z,_.id_osc=X,_.certificado=[],$("#tabela_titulos_certificados tbody tr").each(function(e){var o=0;$(".tipo_titulo_certificado",this).text();switch($(".tipo_titulo_certificado",this).text()){case"Utilidade Pública Estadual":o=7;break;case"Utilidade Pública Municipal":o=8;break;case"Utilidade Pública Federal":o=5;break;case"Entidade Ambientalista":o=1;break;case"CEBAS - Educação":o=2;break;case"CEBAS - Saúde":o=3;break;case"OSCIP":o=4;break;case"CEBAS - Assistência Social":o=6}var a={},t=$(".tipo_titulo_certificado span",this).attr("title");a.bo_oficial="Representante"!=t,a.dt_inicio_certificado="Não informado"!=$(".data_inicio_validade_titulo_certificado",this).text()?$(".data_inicio_validade_titulo_certificado",this).text():"",a.dt_fim_certificado=$(".data_fim_validade_titulo_certificado",this).text(),a.ft_certificado=t,a.ft_inicio_certificado=t,a.ft_fim_certificado=t,a.cd_certificado=o,a.id_certificado=$(this).prop("id"),o>0&&_.certificado.push(a)}),_.bo_nao_possui_certificacoes=$('#certificacoes input[type="checkbox"]').is(":checked"),0==_.certificado.length&&(_.certificado=null),_.headers=Z,_.id_osc=X,i.carregaAjax(r.Certificado(X),"POST",_),(_={}).headers=Z,_.id_osc=X,_.governanca=[];var n={};$("#dirigentes").find("input").each(function(e){$(this)[0].value&&(e%2==0?(n.id_dirigente=$(this).attr("id")?$(this).attr("id"):null,n.tx_nome_dirigente=$(this)[0].value,n.ft_nome_dirigente="Representante"):(n.tx_cargo_dirigente=$(this)[0].value,n.ft_cargo_dirigente="Representante",_.governanca.push(n),n={}))}),0==_.governanca.length&&(_.governanca=null),i.carregaAjax(r.Dirigente(X),"POST",_),(_={}).headers=Z,_.id_osc=X,_.conselho_fiscal=[],$("#conselho_fiscal").find("input").each(function(){if($(this)[0].value){var e={};e.id_conselheiro=$(this).attr("id")?$(this).attr("id"):null,e.tx_nome_conselheiro=$(this)[0].value,e.ft_nome_conselheiro="Representante",_.conselho_fiscal.push(e)}}),0==_.conselho_fiscal.length&&(_.conselho_fiscal=null),i.carregaAjax(r.ConselhoFiscal(X),"POST",_),_.nr_trabalhadores_voluntarios=$("#voluntarios").val(),i.carregaAjax(r.RelacoesTrabalho(X),"POST",_);var s=[];s=D(a,r.Titularidade(),!1);var c=[];c=D(a,r.Conselho(),!1);var l=[];l=D(a,r.PeriodicidadeReuniao(),!1);(_={}).headers=Z,_.id_osc=X,_.conselho=[],_.bo_nao_possui_conselhos=$('#conselhos input[type="checkbox"]').is(":checked"),$(".conselho").each(function(){var e={};e.conselho={},e.conselho.representante=[];var o=0,a=0;$(this).find("select").each(function(){var t=$(this).attr("id").split("-")[0];a=parseInt($(this).attr("id").split("-")[1]),e.conselho.id_conselho=0==a?null:a;for(i=0;i<c.length;i++)if($(this).val()===c[i].tx_nome_conselho){e.conselho.cd_conselho=c[i].cd_conselho,o=e.conselho.cd_conselho;break}for(i=0;i<s.length;i++)if($(this).val()===s[i].tx_nome_tipo_participacao){e.conselho.cd_tipo_participacao=s[i].cd_tipo_participacao;break}for(var i=0;i<l.length;i++)if($(this).val()===l[i].tx_nome_periodicidade_reuniao_conselho){e.conselho.cd_periodicidade_reuniao_conselho=l[i].cd_periodicidade_reuniao_conselho;break}"tx_nome_conselho"==t&&(e.conselho[t]=$(this).val())}),$(this).find("input").each(function(o){var a=$(this).attr("id").split("-")[0];0!==e.conselho.cd_conselho&&("outro"==a&&""!=$(this).val()&&(e.conselho.tx_nome_conselho=$(this).val()),"tx_nome_representante_conselho"==a&&""!=$(this).val()&&e.conselho.representante.push({tx_nome_representante_conselho:$(this).val()})),"dt_data_inicio_conselho"==a&&""!=$(this).val()&&(e.conselho.dt_data_inicio_conselho=$(this).val()),"dt_data_fim_conselho"==a&&""!=$(this).val()&&(e.conselho.dt_data_fim_conselho=$(this).val())}),0!==e.conselho.representante.length&&null!==i.validateObject(e.conselho.cd_conselho,null)&&_.conselho.push(e)}),0==Object.keys(_.conselho).length&&(_.conselho=null),console.log(_),i.carregaAjax(r.ParticipacaoSocialConselho(X),"POST",_);var d=["Membro de comissão organizadora nacional","Membro de comissão organizadora estadual ou distrital","Membro de comissão organizadora municipal","Delegado para etapa nacional","Delegado para etapa estadual ou distrital","Participante de etapa municipal","Participante de conferência livre ou virtual","Palestrante ou convidado","Observador","Mediador, moderador ou relator","Outro"],p=[1,2,3,4,5,6,7,8,9,10,11],u={};$.ajax({url:a,type:"GET",async:!1,dataType:"json",data:{flag:"consulta",rota:r.Conferencia()},error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(e){u=e}});(_={}).headers=Z,_.id_osc=X,_.conferencia=[],_.bo_nao_possui_conferencias=$('#conferencias input[type="checkbox"]').is(":checked"),$(".conferencia").each(function(){var e={},o=0;$(this).find("select").each(function(){$(this).attr("id").split("-")[0];for(a=0;a<u.length;a++)if($(this).val()===u[a].tx_nome_conferencia){e.cd_conferencia=u[a].cd_conferencia,o=parseInt($(this).attr("id").split("-")[1]),e.tx_nome_conferencia="";break}for(var a=0;a<d.length;a++)if($(this).val()===d[a]){e.cd_forma_participacao_conferencia=p[a];break}}),$(this).find("input").each(function(){"outro"==$(this).attr("id").split("-")[0]&&(e.tx_nome_conferencia=$(this).val());for(o=0;o<u.length;o++)if($(this).val()===u[o].tx_nome_conferencia){e.cd_conferencia=u[o].cd_conferencia;break}for(var o=0;o<d.length;o++)if($(this).val()===d[o]){e.cd_forma_participacao_conferencia=p[o];break}(i.contains("19",$(this).val())||i.contains("20",$(this).val()))&&(e.dt_ano_realizacao=$(this).val())}),$.isEmptyObject(e)||(e.id_conferencia=0!=o?o:null,_.conferencia.push(e))}),i.carregaAjax(r.ParticipacaoSocialConferencia(X),"POST",_);(_={}).headers=Z,_.id_osc=X,_.outra=[],_.bo_nao_possui_outros_part=$('#outros_part input[type="checkbox"]').is(":checked"),$("#outros_part").find("div").children(".form-group").each(function(){$(this).find("input").each(function(){var e=$(this).attr("id").split("-")[0];if(""!==$(this).val()){var o={};o[e]=$(this).val(),_.outra.push(o)}else _.outra.push(null)})}),i.carregaAjax(r.OutraParticipacaoSocial(X),"POST",_),K();var _;(_={}).headers=Z,_.id_osc=X,_.fonte_recursos=[],$("#recursos").children().each(function(){var e=$(this).find("select").val(),o=$("#recursos_geral-"+e+' input[type="checkbox"]').is(":checked"),a={};a.dt_ano_recursos_osc=e,a.bo_nao_possui=o,a.recursos=[],o||$(this).find('input:not([type="checkbox"])').each(function(){var e={},o=$(this).val().replace(/\./g,"");o=o.replace(/,/g,"."),e.cd_fonte_recursos_osc=$(this).attr("id"),e.nr_valor_recursos_osc=""!=o?parseFloat(o):0,a.recursos.push(e)}),_.fonte_recursos.push(a)}),i.carregaAjax(r.AtualizarFontesRecursos(X),"POST",_);i.abrirModalAjuda("Salvo com sucesso!",{"Salvo com sucesso!":"Suas alterações serão processadas aproximadamente em instantes.<br><br>Obrigado!"})})})});