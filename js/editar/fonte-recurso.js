"use strict";function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function r(r,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,s,o){return s&&r(e.prototype,s),o&&r(e,o),e}}(),FonteRecurso=function(){function r(){_classCallCheck(this,r)}return _createClass(r,[{key:"montarPorAno",value:function(r,e,s,o,n,t,c,a,i,u,p){var d=$.grep(n,function(r){return 1==r.cd_origem_fonte_recursos_osc}),l=$.grep(n,function(r){return 2==r.cd_origem_fonte_recursos_osc}),_=$.grep(n,function(r){return 4==r.cd_origem_fonte_recursos_osc}),f=$.grep(n,function(r){return 3==r.cd_origem_fonte_recursos_osc});$("#recursos").append("<div id="+r+"></div>"),0!==e&&$("#"+r).toggleClass("hidden");b=t.items;u=a.createFactory(u),i.render(u({dados:b,ano:r}),document.getElementById(r)),b=c.recursos_geral;for(var v=[],h=0;h<b.length;h++)v.push(o.FormItens("ano-"+r,b[h].label,r,b[h].fonte,b[h].placeholder,b[h].type,b[h].options,b[h].pretext,b[h].custom_class));p=a.createFactory(p),i.render(p({header:null,dados:v}),document.getElementById("recursos_geral-"+r)),c.recursos_nao_financeiros=this.mapContentRecursos(s.recursos_nao_financeiros,f),c.recursos_privados=this.mapContentRecursos(s.recursos_privados,l),c.recursos_proprios=this.mapContentRecursos(s.recursos_proprios,_),c.recursos_publicos=this.mapContentRecursos(s.recursos_publicos,d);for(var m=[{items:c.recursos_proprios,divId:"recursos_proprios"},{items:c.recursos_publicos,divId:"recursos_publicos"},{items:c.recursos_privados,divId:"recursos_privados"},{items:c.recursos_nao_financeiros,divId:"recursos_nao_financeiros"}],g=0;g<m.length;g++){for(var v=[],b=m[g].items,y=m[g].divId,h=0;h<b.length;h++){var C=b[h].content;""!==C&&-1===C.indexOf(".")&&(C+="00"),v.push(o.FormItens(b[h].id,b[h].label,C,b[h].fonte,b[h].placeholder,b[h].type,b[h].options,b[h].pretext))}p=a.createFactory(p),i.render(p({header:null,dados:v}),document.getElementById(y+"-"+r))}$("#recursos_proprios-"+r).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_proprios-"+r).find("input").addClass("with-pretext"),$("#recursos_proprios-"+r).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_publicos-"+r).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_publicos-"+r).find("input").addClass("with-pretext"),$("#recursos_publicos-"+r).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_privados-"+r).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_privados-"+r).find("input").addClass("with-pretext"),$("#recursos_privados-"+r).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_nao_financeiros-"+r).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_nao_financeiros-"+r).find("input").addClass("with-pretext"),$("#recursos_nao_financeiros-"+r).find(".input-box").prepend('<span class="pretext">R$</span>')}},{key:"carregaFontes",value:function(r){var e=null;return $.ajax({url:"js/controller.php",async:!1,type:"GET",dataType:"json",data:{flag:"consulta",rota:r.FontesRecursos()},success:function(r){e=r},error:function(r){console.log(r)}}),e}},{key:"montarFontedeRecursos",value:function(r,e,s,o,n,t,c,a){for(var i=o.itemsRecurso(),u=o.tiposRecurso(),p=this.carregaFontes(s),d=0;d<r.recursos.recursos.length;d++)this.montarPorAno(r.recursos.recursos[d].dt_ano_recursos_osc,d,r.recursos.recursos[d],e,p,i,u,n,t,c,a);$(".select-ano").find(".form-control").bind("change",function(){var r=$(this).val(),e=$(this).attr("id").slice(4);$("#"+r).hasClass("hidden")&&($("#"+r).toggleClass("hidden"),$("#"+r).siblings().addClass("hidden")),$(this).find("option[value="+e+"]").prop("selected",!0)})}},{key:"mapContentRecursos",value:function(r,e){for(var s=0;s<e.length;s++){var o=e[s];o.id=o.cd_fonte_recursos_osc,o.label=o.tx_nome_fonte_recursos_osc,o.content="",o.placeholder="Insira o valor";for(var n in r){var t=r[n];r.hasOwnProperty(n)&&t.cd_fonte_recursos_osc===o.cd_fonte_recursos_osc&&(o.content=t.nr_valor_recursos_osc)}}return e}}]),r}();