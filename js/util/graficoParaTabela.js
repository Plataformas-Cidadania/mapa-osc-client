"use strict";function escolherGrafico(a,e){var t="#grafico-"+a,r="#tabela-"+a,l={config:[],leg_X:"",leg_Y:"",tituloColuna:[],legenda:"",titulo:""};l.config=e.configuracao.join().replace(/'/gi,"").split(","),l.leg_X=e.legenda_x,l.leg_Y=e.legenda_y,l.tituloColuna=e.titulo_colunas,l.titulo=e.titulo,l.legenda="Fonte: "+e.fontes.join(", ")+". "+e.legenda;var o,i=removerAcentos(e.tipo_grafico.toLowerCase());if(o=e.series,"rede"==i||"linhas"==i||"areas"==i||"linhasBar"==i||"coluna"==i||"linhasFocus"==i){l.series=o;(n=[]).push(l),"rede"==i?createMultiBarChart(t,n):"linhas"==i?createLineChart(t,n):"linhasBar"==i?createLinePlusBarChart(t,n):"areas"==i?createStackedAreaChart(t,n):"coluna"==i?createMultiBarHorizontalChart(t,n):"linhasFocus"==i&&createLineWithFocusChart(t,n),$(r).click(function(){createTabela_MultBar_Line(n,!1)})}else if("barra"==i||"pizza"==i){l.values=o;var n=[];n.push(l),"barra"==i?createBarChart(t,n):"pizza"==i&&createDonutChart(t,n),$(r).click(function(){createTabela_Bar_Donut(n)})}}function removerAcentos(a){var e=a,t={a:/[\xE0-\xE6]/g,e:/[\xE8-\xEB]/g,i:/[\xEC-\xEF]/g,o:/[\xF2-\xF6]/g,u:/[\xF9-\xFC]/g,c:/\xE7/g,n:/\xF1/g};for(var r in t){var l=t[r];e=e.replace(l,r)}return e}function acionarModalTabela(a,e){$("#modalTitulo").html(""),$("#modalTitulo").html(a),$("#corpoModal").html(""),$("#corpoModal").html(e),$("#modalTabela").modal("show"),verificarContraste()}function formatarDinheiro(a){return a.toLocaleString("pt-BR",{minimumFractionDigits:2,style:"currency",currency:"BRL"})}function createTabela_Bar_Donut(a){var e='<table class="table table-hover table-striped table-bordered table-responsive">',t="<thead><tr>";for(var r in a[0].tituloColuna)t+="<th>"+a[0].tituloColuna[r]+"</th>";e+=t+="</tr></thead>";var l="<tbody>";for(var o in a[0].values){l+="<tr><td>"+a[0].values[o].label+"</td>";var i=a[0].values[o].value;"$"==a[0].tipo_valor&&(i=formatarDinheiro(i)),l+="<td>"+i+"</td></tr>"}e+=l+="</tbody>",e+="</table>",e+="<div>"+a[0].legenda+"</div>",acionarModalTabela(a[0].titulo,e)}function createTabela_MultBar_Line(a,e){var t='<table class="table table-hover table-striped table-bordered table-responsive">',r="<thead><tr>";for(var l in a[0].tituloColuna)r+="<th>"+a[0].tituloColuna[l]+"</th>";t+=r+="</tr></thead>";var o="<tbody>";for(l=0;l<a[0].series.length;l++)for(var i in a[0].series[l].values)if(o+="<tr><td>"+a[0].series[l].key+"</td>",e){o+="<td>"+a[0].series[l].values[i].x+"</td>";var n=a[0].series[l].values[i].y;"$"==a[0].series[l].tipo_valor&&(n=formatarDinheiro(n)),o+="<td>"+n+"</td></tr>"}else{o+="<td>"+a[0].series[l].values[i].label+"</td>";var s=a[0].series[l].values[i].value;"$"==a[0].series[l].tipo_valor&&(s=formatarDinheiro(s)),o+="<td>"+s+"</td></tr>"}t+=o+="</tbody>",t+="</table>",t+="<div>"+a[0].legenda+"</div>",acionarModalTabela(a[0].titulo,t)}