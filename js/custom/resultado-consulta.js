"use strict";function getParameter(a,o){o||(o=location.href);var e="[\\?&]"+(a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)",i=new RegExp(e).exec(o);return null==i?null:i[1]}require(["jquery-ui"],function(a){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,o){$(this).css(a),$("<div>").addClass("arrow").addClass(o.vertical).addClass(o.horizontal).appendTo(this)}}})});var urlRota,type_http;require(["rotas","jquery-ui","datatables-responsive","leafletCluster","leaflet-groupedlayercontrol","simplePagination","util"],function(a){function o(a){return a=a.replace(/[ÀÁÂÃÄÅ]/g,"A"),a=a.replace(/[àáâãäå]/g,"a"),a=a.replace(/[ÉÈÊË]/g,"E"),a=a.replace(/[éèêë]/g,"e"),a=a.replace(/[ÍÌÎÏ]/g,"I"),a=a.replace(/[íìîï]/g,"i"),a=a.replace(/[ÓÒÔÕ]/g,"O"),a=a.replace(/[óòôõ]/g,"o"),a=a.replace(/[ÚÙÛÜ]/g,"U"),a=a.replace(/[úùûü]/g,"u"),a=a.replace(/[Ç]/g,"C"),a=a.replace(/[ç]/g,"c")}function e(a,o){var e;$("#loading").removeClass("hide"),$("#resultadoconsulta_formato_dados").hide(),o?(type_http="POST",e=S):(type_http="GET",e=null),$.ajax({url:a,type:type_http,dataType:"json",data:e,error:function(a){console.log("Erro no ajax: "+a)},success:function(a){if("Nenhuma Organização encontrada!"!==a){var o=a.length;a.lista_osc&&(o=a.lista_osc.length);var e=new Array(o),i=0,r="Dado não informado.";if(a.lista_osc){for(var t in a.lista_osc)if("0"!=t){e[i]=new Array(6);n=null!==a.lista_osc[t][4]?a.lista_osc[t][4]:"img/camera.jpg";e[i][0]='<img class="img-circle media-object" src='+n+' height="64" width="64">',e[i][1]=null!==a.lista_osc[t][0]?a.lista_osc[t][0]:r,e[i][2]=null!==a.lista_osc[t][1]?a.lista_osc[t][1]:r,e[i][3]=null!==a.lista_osc[t][2]?a.lista_osc[t][2]:r,e[i][4]=null!==a.lista_osc[t][3]?a.lista_osc[t][3]:r,e[i][5]='<button type="button" onclick="location.href=\'visualizar-osc.html#'+t+'\';" class="btn btn-info"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Detalhar</button>',i++}}else for(var t in a)if("0"!=t){e[i]=new Array(6);var n=null!==a[t][4]?a[t][4]:"img/camera.jpg";e[i][0]='<img class="img-circle media-object" src='+n+' height="64" width="64">',e[i][1]=null!==a[t][0]?a[t][0]:r,e[i][2]=null!==a[t][1]?a[t][1]:r,e[i][3]=null!==a[t][2]?a[t][2]:r,e[i][4]=null!==a[t][3]?a[t][3]:r,e[i][5]='<button type="button" onclick="location.href=\'visualizar-osc.html#'+t+'\';" class="btn btn-info"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Detalhar</button>',i++}if(void 0!==e[0]){var s=$("#resultadoconsulta_formato_dados").DataTable({responsive:!0,processing:!0,deferLoading:1e3,deferRender:!0,searching:!1,data:e,dom:"Bfrtip",bPaginate:!1,bSort:!0,aaSorting:[[1,"asc"]],columns:[{title:"",width:50},{title:"Nome da OSC",width:200},{title:"CNPJ"},{title:"Natureza Jurídica"},{title:"Endereço"},{title:"Detalhar"}],aoColumnDefs:[{bSortable:!1,aTargets:[0]},{bSortable:!1,aTargets:[5]},{bSortable:!1,aTargets:[4]}],autoWidth:!0});s.destroy(),s.draw(),$("#resultadoconsulta_formato_dados").show(),$("#loading").addClass("hide")}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==V&&"municipio"!==V?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(Q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==V&&"municipio"!==V?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(Q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}}),$("#resultadoconsulta_formato_dados").on("draw.dt",function(){verificarContraste()})}function i(a){for(var o in a)if("0"!=o){var e=function(a,o,e){if(""!==o&&null!==o||null!==e&&""!==e){var i=new PruneCluster.Marker(o,e);return i.data.ID=a,z.PrepareLeafletMarker=function(a,o){a.on("click",function(){!function(a,o){o.bindPopup('<img id="loading" src="img/loading.gif" style="padding-top: 10px; padding-left: 10px;"/>').openPopup(),$.ajax({url:Z.OSCPopUpByID(a),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(e){if(void 0!==e){var i=(null!==e.tx_endereco?e.tx_endereco:"")+" - "+(null!==e.tx_bairro?e.tx_bairro:""),r='<div class="mapa_organizacao clearfix"><span id="spantitle" class="magneticTooltip"><button id="title" class="btn-link"  onclick=location.href="visualizar-osc.html#'+a+'"><h4>'+(null!==e.tx_nome_osc?e.tx_nome_osc:"Dado não informado.")+'</h4></button></span><div class="coluna1"><strong></strong><strong>Endereço: </strong>'+i+"<br><strong>Atividade Econômica: </strong>"+(null!==e.tx_nome_atividade_economica?e.tx_nome_atividade_economica:"Dado não informado.")+"<br><strong>Natureza Jurídica: </strong>"+(null!==e.tx_nome_natureza_juridica?e.tx_nome_natureza_juridica:"Dado não informado.")+'<br><br><div align="center"><button type = button class="btn btn-info" onclick=location.href="visualizar-osc.html#'+a+'"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Detalhar</button></div></div></div>';o.bindPopup(r).openPopup()}}})}(o.ID,a)})},z.RegisterMarker(i),z}return null}(o,a[o][0],a[o][1]);null!==e&&G.addLayer(e)}"avancado"==V&&"{}"!=S.avancado&&($("#export button").removeAttr("disabled"),$("#export button").addClass("btn-success"),$("#export button").attr("title","")),$("#loadingMapModal").hide(),z.ProcessView()}function r(a){var o=a.target;o.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||o.bringToFront(),"GO"==o.feature.properties.Name&&o.bringToBack(),ta.update(o.feature.properties)}function t(a){p.resetStyle(a.target),ta.update()}function n(a){var o=a.target;G.fitBounds(o.getBounds())}function s(a){return a>6e4?"#800026":a>45e3?"#E31A1C":a>3e4?"#FC4E2A":a>15e3?"#FEB24C":a>1e3?"#FED976":"#FFEDA0"}function c(a){return a>.799?"#527DA7":a>.699?"#58935D":a>.599?"#D2CE49":a>.499?"#CC9538":"#AD3735"}function d(a,o){var s;"regiao"==o||"todos"==o?s="labelClassRegiao":"estado"==o&&(s="labelClassEstado");for(var c in a){var u=L.divIcon({id:a[c].id_regiao,className:s,html:"<p>"+a[c].nr_quantidade_osc_regiao+"</p>"});M[a[c].id_regiao]=a[c].nr_quantidade_osc_regiao;var p=function(a,o,s,c,u){if(""!==s&&null!==s||null!==c&&""!==c){var p;return"regiao"==u||"todos"==u?p=L.marker([s,c],{icon:a}).on("click",function(a){var o=a.target.options.icon.options.id;$("#loadingMapModal").show(),$.ajax({url:Z.ClusterEstadoPorRegiao(o),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(i){if(e(urlRota,j),void 0!==i.length){for(var r=0,t=0;t<i.length;t++)r+=i[t].nr_quantidade_osc_regiao;l(r)}else l(Object.keys(i).length-1);void 0!==i&&(G.setView([a.target._latlng.lat,a.target._latlng.lng],5),G.removeLayer(a.target),delete R[o],d(i,"estado"))}})}):"estado"==u&&(p=L.marker([s,c],{icon:a}).on("click",function(a){var o=a.target.options.icon.options.id;$("#loadingMapModal").show(),$.ajax({url:Z.OSCByStateInMap(o),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(s){if(e(urlRota,j),void 0!==s.length){for(var c=0,d=0;d<s.length;d++)c+=s[d].nr_quantidade_osc_regiao;l(c)}else l(Object.keys(s).length-1);if(void 0!==s){G.setView([a.target._latlng.lat,a.target._latlng.lng],6),G.removeLayer(a.target);var u=A[o];u.off(),u.on({mouseover:r,mouseout:t,click:n}),i(s)}}})})),p}}(u,a[c].id_regiao,a[c].geo_lat_centroid_regiao,a[c].geo_lng_centroid_regiao,o);N.addLayer(p),"estado"==o?y[a[c].id_regiao]=p:"regiao"!=o&&"todos"!=o||(R[a[c].id_regiao]=p)}E||(N.addTo(x),E=!0),$("#loadingMapModal").hide()}function l(a){$(".pagination").pagination({items:a,itemsOnPage:10,hrefTextPrefix:"#",prevText:"Anterior",nextText:"Próximo",onPageClick:function(a){!function(a){null===a&&(a=0);var o=10*parseInt(a)-10;"avancado"==V?(urlRota=Z.ConsultaAvancadaLista(o),j=!0):"municipio"==V?urlRota=Z.OSCByCounty(Q,o):"estado"==V?urlRota=Z.OSCByState(Q,o):"regiao"==V?urlRota=Z.OSCByRegion(Q,o):"todos"==V?urlRota=Z.AllOSC(o):"organizacao"==V&&(urlRota=Z.OSCByName(getParameter("organizacao"),o,getParameter("tipoBusca")));e(urlRota,j)}(a)}})}function u(){}var p,m,b,g,_,f=!1,v=!1,M=(new Util,{}),h={},A={},y={},R={},N=L.layerGroup(),x=L.layerGroup(),C=L.layerGroup(),I=L.layerGroup(),E=!1,O=!0,j=!1,X=!1,T="",P="",S={},q="",F=18,D={center:new L.LatLng(-16.55555555,-60.55555555),zoom:4,minZoom:4},B=[],G=new L.Map("map",D),z=new PruneClusterForLeaflet,w=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:F,attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a>'}),k=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYW9zY3MiLCJhIjoiY2owbDJpYWxwMDM3dTMzbzh6dDU2bnpzdyJ9._dh2UCWnAeNeG0ZL5sQ5gA",{id:"mapbox.dark",attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>'}),J=L.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]});G.addLayer(J),G.addLayer(k),G.addLayer(w);var U=new L.Control.FullScreen;G.addControl(U);var H,V,Z=new Rotas,W=void 0!==window.location.href.split("?")[1]?window.location.href.split("?")[1].split("="):null,Y=$("#buscarPerfil .tab-content");if(Y.find(".btn.btn-primary").on("click",function(){var a=Y.find(".tab-pane.fade.active.in"),e=a.attr("id"),i=a.find(".form-control").val();i=o(i.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_"),"organizacao"==e&&""!==i?(g="./resultado-consulta.html?"+e+"="+i+"&tipoBusca=0",location.href=g):""!==(i=$(".response").val())?(g="./resultado-consulta.html?"+e+"="+i,location.href=g):$("#errorLabel").removeClass("hide")}),$("#organizacao .form-control").autocomplete({minLength:3,source:function(a,e){q=o(a.term.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),$.ajax({url:Z.AutocompleteOSCByName(q,10,0),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.tx_nome_osc,value:a.tx_nome_osc,id:a.id_osc}}))},error:function(a){e([])}})},select:function(a,e){g="./resultado-consulta.html?organizacao="+o(e.item.value.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_")+"&tipoBusca=1",location.href=g}}),$("#municipio .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:Z.AutocompleteOSCByCounty(o(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),25),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,value:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,id:a.edmu_cd_municipio}}))},error:function(a){e([])}})},select:function(a,o){$(".response").val(o.item.id),g="./resultado-consulta.html?municipio="+o.item.id,location.href=g}}),$("#estado .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:Z.AutocompleteOSCByState(o(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.eduf_nm_uf,value:a.eduf_nm_uf,id:a.eduf_cd_uf}}))},error:function(){e([])}})},select:function(a,o){$(".response").val(o.item.id),g="./resultado-consulta.html?estado="+o.item.id,location.href=g}}),$("#regiao .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:Z.AutocompleteOSCByRegion(o(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edre_nm_regiao,value:a.edre_nm_regiao,id:a.edre_cd_regiao}}))},error:function(){e([])}})},select:function(a,o){$(".response").val(o.item.id),g="./resultado-consulta.html?regiao="+o.item.id,location.href=g}}),$(".ui-autocomplete-input").keypress(function(a){if(13==a.which)return $(".btn-primary").click(),$(".ui-menu-item").hide(),!1}),null!==W){V=W[0];var Q=W[1];if(Q=Q.replace(/\./g,""),Q=Q.split("&")[0],"organizacao"==V)urlRota=Z.OSCByName(getParameter("organizacao"),0,getParameter("tipoBusca")),H=Z.OSCByNameInMap(getParameter("organizacao"),getParameter("tipoBusca")),O=!1,X=!1;else if("municipio"==V)urlRota=Z.OSCByCounty(Q,0),H=Z.OSCByCountyInMap(Q),O=!1,X=!0,_=Q,T="do município ",P="municipio.png";else if("estado"==V)urlRota=Z.OSCByState(Q,0),H=Z.ClusterEstadoPorRegiao(Q),X=!0,_=Q,T="do estado ",P="estado.png";else if("regiao"==V)urlRota=Z.OSCByRegion(Q,0),H=Z.ClusterRegiao(Q),X=!0,_=Q,T="da região ",P="regiao.png";else if("avancado"==V){if(S.avancado=window.localStorage.getItem("params_busca_avancada"),"{}"==S.avancado)V="todos",H=Z.ClusterPais(),urlRota=Z.AllOSC(0);else{var K=JSON.parse(S.avancado),aa=!0;if(K.Adicionais&&1==Object.keys(K).length&&(aa=!1),aa?(urlRota=Z.ConsultaAvancadaLista(0),H=Z.ConsultaAvancadaMapa(),O=!1,j=!0):(V="todos",H=Z.ClusterPais(),urlRota=Z.AllOSC(0)),K.dadosGerais&&(K.dadosGerais.cd_regiao&&(_=K.dadosGerais.cd_regiao,T="da região ",P="regiao.png",X=!0),K.dadosGerais.cd_uf&&(_=K.dadosGerais.cd_uf,T="do estado ",P="estado.png",X=!0),K.dadosGerais.cd_municipio&&(_=K.dadosGerais.cd_municipio,T="do município ",P="municipio.png",X=!0)),K.Adicionais)for(var oa in K.Adicionais){var ea=oa.split("cd_indice-")[1];B.push(ea)}}!function(a,o){if("avancado"==o){var e=JSON.parse(a),i=e.dadosGerais,r="<b><u>Filtros utilizados:</u></b> ",t=!1;if(i){i.tx_razao_social_osc&&(r+="<b><i>Nome da OSC:</i></b> "+i.tx_razao_social_osc+", "),i.tx_nome_regiao&&(r+="<b><i>Região:</i></b> "+i.tx_nome_regiao+", "),i.tx_nome_fantasia_osc&&(r+="<b><i>Nome Fantasia:</i></b> "+i.tx_nome_fantasia_osc+", "),i.tx_nome_uf&&(r+="<b><i>Estado:</i></b> "+i.tx_nome_uf+", "),i.cd_identificador_osc&&(r+="<b><i>CNPJ:</i></b> "+i.cd_identificador_osc+", "),i.cd_situacao_imovel_osc&&$.ajax({url:Z.SituacaoImovel_id(i.cd_situacao_imovel_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Situação do Imóvel:</i></b> "+a[0].tx_nome_situacao_imovel+", ")}}),(i.anoFundacaoMIN||i.anoFundacaoMAX)&&(r+="<b><i>Ano de Fundação</i></b> ",i.anoFundacaoMIN&&(r+="<b><i>maior que:</i></b> "+i.anoFundacaoMIN+", "),i.anoFundacaoMAX&&(r+="<b><i>menor que:</i></b> "+i.anoFundacaoMAX+", ")),i.tx_nome_municipio&&(r+="<b><i>Município:</i></b> "+i.tx_nome_municipio+", ");var n="<b><i>Natureza Jurídica:</i></b> ";i.naturezaJuridica_associacaoPrivada&&(n+="Associação Privada, ",t=!0),i.naturezaJuridica_fundacaoPrivada&&(n+="Fundação Privada, ",t=!0),i.naturezaJuridica_organizacaoReligiosa&&(n+="Organização Religiosa, ",t=!0),i.naturezaJuridica_organizacaoSocial&&(n+="Organização Social, ",t=!0),i.naturezaJuridica_outra&&(n+="Não informado, ",t=!0),t&&(r+=n),i.cd_objetivo_osc&&$.ajax({url:Z.Objetivos_ODS_id(i.cd_objetivo_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(r+="<b><i>Objetivos do Desenvolvimento Sustentável - ODS:</i></b> "+a.tx_nome_objetivo_projeto+", ")}}),i.cd_meta_osc&&$.ajax({url:Z.MetasById(i.cd_meta_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(r+="<b><i>Metas Relacionadas ao ODS:</i></b> "+a.tx_nome_meta_projeto+", ")}})}var s=e.atividadeEconomica;s&&(r+="<b><i>Atividade Econômica (CNAE):</i></b> "+s.tx_atividade_economica+", ");var c=e.areasSubareasAtuacao;if(c){var d=[];$.ajax({url:Z.AreaAtuacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: ")},success:function(a){for(var o in c){var e=parseInt(o.split("cd_area_atuacao-")[1]);void 0!=e&&$.each(a,function(a,o){e==o.cd_area_atuacao&&-1===d.indexOf(o.tx_nome_area_atuacao)&&d.push(o.tx_nome_area_atuacao)})}$.ajax({url:Z.SubAreaAtuacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: ")},success:function(a){for(o in c){var e=parseInt(o.split("cd_subarea_atuacao-")[1]);void 0!=e&&$.each(a,function(a,o){e==o.cd_subarea_atuacao&&-1===d.indexOf(o.tx_nome_subarea_atuacao)&&d.push(o.tx_nome_subarea_atuacao)})}d.length>0&&(r+="<b><i>Área e Subárea de Atuação:</i></b> "+d.join(", ")+", ")}})}})}var l=e.titulacoesCertificacoes;if(l){var u=[];$.ajax({url:Z.Busca_Certificado(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){var o={1:"titulacao_entidadeAmbientalista",2:"titulacao_cebasEducacao",3:"titulacao_cebasSaude",4:"titulacao_oscip",5:"titulacao_utilidadePublicaFederal",6:"titulacao_cebasAssistenciaSocial",7:"titulacao_utilidadePublicaEstadual",8:"titulacao_utilidadePublicaMunicipal",9:"titulacao_naoPossui"};for(var e in l)for(var i in o)if(o[i]==e)for(var t in a)a[t].cd_certificado==i&&-1===u.indexOf(a[t].tx_nome_certificado)&&u.push(a[t].tx_nome_certificado);u.length>0&&(r+="<b><i>Titulações e Certificações:</i></b> "+u.join(", ")+", ")}})}var p=e.relacoesTrabalhoGovernanca;p&&(p.tx_nome_dirigente&&(r+="<b><i>Nome do Dirigente:</i></b> "+p.tx_nome_dirigente+", "),p.tx_cargo_dirigente&&(r+="<b><i>Cargo do Dirigente:</i></b> "+p.tx_cargo_dirigente+", "),p.tx_nome_conselheiro&&(r+="<b><i>Nome do Membro do Conselho Fiscal:</i></b> "+p.tx_nome_conselheiro+", "),(p.totalTrabalhadoresMIN||p.totalTrabalhadoresMAX)&&(r+="<b><i>Total de Trabalhadores</i></b> ",p.totalTrabalhadoresMIN&&(r+="<b><i>maior que:</i></b> "+p.totalTrabalhadoresMIN+", "),p.totalTrabalhadoresMAX&&(r+="<b><i>menor que:</i></b> "+p.totalTrabalhadoresMAX+", ")),(p.totalEmpregadosMIN||p.totalEmpregadosMAX)&&(r+="<b><i>Total de Empregados</i></b> ",p.totalEmpregadosMIN&&(r+="<b><i>maior que:</i></b> "+p.totalEmpregadosMIN+", "),p.totalEmpregadosMAX&&(r+="<b><i>menor que:</i></b> "+p.totalEmpregadosMAX+", ")),(p.trabalhadoresDeficienciaMIN||p.trabalhadoresDeficienciaMAX)&&(r+="<b><i>Trabalhadores com Deficiência</i></b> ",p.trabalhadoresDeficienciaMIN&&(r+="<b><i>maior que:</i></b> "+p.trabalhadoresDeficienciaMIN+", "),p.trabalhadoresDeficienciaMAX&&(r+="<b><i>menor que:</i></b> "+p.trabalhadoresDeficienciaMAX+", ")),(p.trabalhadoresVoluntariosMIN||p.trabalhadoresVoluntariosMAX)&&(r+="<b><i>Trabalhadores voluntários</i></b> ",p.totalTrabalhadoresMIN&&(r+="<b><i>maior que:</i></b> "+p.trabalhadoresVoluntariosMIN+", "),p.totalTrabalhadoresMAX&&(r+="<b><i>menor que:</i></b> "+p.trabalhadoresVoluntariosMAX+", ")));var m=e.espacosParticipacaoSocial;m&&(m.cd_conselho&&$.ajax({url:Z.Conselho_id(m.cd_conselho),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Nome do Conselho:</i></b> "+a[0].tx_nome_conselho+", ")}}),m.tx_nome_representante_conselho&&(r+="<b><i>Nome de representante conselho:</i></b> "+m.tx_nome_representante_conselho+", "),m.cd_tipo_participacao&&$.ajax({url:Z.Titularidade_id(m.cd_tipo_participacao),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Titularidade:</i></b> "+a[0].tx_nome_tipo_participacao+", ")}}),m.dt_data_inicio_conselho&&(r+="<b><i>Data de Início de Vigência:</i></b> "+m.dt_data_inicio_conselho+", "),m.dt_data_fim_conselho&&(r+="<b><i>Data de Fim de Vigência:</i></b> "+m.dt_data_fim_conselho+", "),m.cd_conferencia&&$.ajax({url:Z.Conferencia_id(m.cd_conferencia),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Nome da Conferência:</i></b> "+a[0].tx_nome_conferencia+", ")}}),m.cd_forma_participacao_conferencia&&$.ajax({url:Z.FormaParticipacaoConferencia_id(m.cd_forma_participacao_conferencia),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Forma de Participação na Conferência:</i></b> "+a[0].tx_nome_forma_participacao_conferencia+", ")}}),(m.anoRealizacaoConferenciaMIN||m.anoRealizacaoConferenciaMAX)&&(r+="<b><i>Ano de Realização da Conferência</i></b> ",m.anoRealizacaoConferenciaMIN&&(r+="<b><i>maior que:</i></b> "+m.anoRealizacaoConferenciaMIN+", "),m.anoRealizacaoConferenciaMAX&&(r+="<b><i>menor que:</i></b> "+m.anoRealizacaoConferenciaMAX+", ")));var b=e.projetos;b&&(b.tx_nome_projeto&&(r+="<b><i>Nome do Projeto:</i></b> "+b.tx_nome_projeto+", "),b.cd_status_projeto&&$.ajax({url:Z.SituacaoProjeto_id(b.cd_status_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Situação do projeto:</i></b> "+a[0].tx_nome_status_projeto+", ")}}),b.dt_data_inicio_projeto&&(r+="<b><i>Data de Início Projeto:</i></b> "+b.dt_data_inicio_projeto+", "),b.dt_data_fim_projeto&&(r+="<b><i>Data de Fim Projeto:</i></b> "+b.dt_data_fim_projeto+", "),b.cd_abrangencia_projeto&&$.ajax({url:Z.AbrangenciaProjeto_id(b.cd_abrangencia_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Abrangência de atuação:</i></b> "+a[0].tx_nome_abrangencia_projeto+", ")}}),b.cd_zona_atuacao_projeto&&$.ajax({url:Z.ZonaAtuacaoProjeto_id(b.cd_zona_atuacao_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Zona de Atuação:</i></b> "+a[0].tx_nome_zona_atuacao+", ")}}),b.cd_origem_fonte_recursos_projeto&&$.ajax({url:Z.FontesRecursosProjeto_id(b.cd_origem_fonte_recursos_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a.length>0&&(r+="<b><i>Fontes de Recursos:</i></b> "+a[0].tx_nome_origem_fonte_recursos_projeto+", ")}}),b.cd_objetivo_projeto&&$.ajax({url:Z.Objetivos_ODS_id(b.cd_objetivo_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(r+="<b><i>Objetivos do Desenvolvimento Sustentável - ODS para Projeto:</i></b> "+a.tx_nome_objetivo_projeto+", ")}}),b.cd_meta_projeto&&$.ajax({url:Z.MetasById(b.cd_meta_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(r+="<b><i>Metas Relacionadas ao ODS para projeto:</i></b> "+a.tx_nome_meta_projeto+", ")}}),b.tx_nome_financiador&&(r+="<b><i>Financiadores do Projeto:</i></b> "+b.tx_nome_financiador+", "),b.tx_nome_regiao_localizacao_projeto&&(r+="<b><i>Local de Execução:</i></b> "+b.tx_nome_regiao_localizacao_projeto+", "),b.tx_nome_publico_beneficiado&&(r+="<b><i>Público Beneficiado:</i></b> "+b.tx_nome_publico_beneficiado+", "),b.tx_nome_osc_parceira_projeto&&(r+="<b><i>OSC Parceiras:</i></b> "+b.tx_nome_osc_parceira_projeto+", "),(b.totalBeneficiariosMIN||b.totalBeneficiariosMAX)&&(r+="<b><i>Total de Beneficiários</i></b> ",b.totalBeneficiariosMIN&&(r+="<b><i>maior que:</i></b> "+b.totalBeneficiariosMIN+", "),b.totalBeneficiariosMAX&&(r+="<b><i>menor que:</i></b> "+b.totalBeneficiariosMAX+", ")),(b.valorTotalMIN||b.valorTotalMAX)&&(r+="<b><i>Valor Total Projeto</i></b> ",b.valorTotalMIN&&(r+="<b><i>maior que:</i></b> "+b.valorTotalMIN+", "),b.valorTotalMAX&&(r+="<b><i>menor que:</i></b> "+b.valorTotalMAX+", ")),(b.valorRecebidoMIN||b.valorRecebidoMAX)&&(r+="<b><i>Valor Recebido Projeto</i></b> ",b.valorRecebidoMIN&&(r+="<b><i>maior que:</i></b> "+b.valorRecebidoMIN+", "),b.valorRecebidoMAX&&(r+="<b><i>menor que:</i></b> "+b.valorRecebidoMAX+", ")));var g=e.fontesRecursos;g&&((g.anoFonteRecursoMIN||g.anoFonteRecursoMAX)&&(r+="<b><i>Fontes de recursos anuais da OSC Ano</i></b> ",g.anoFonteRecursoMIN&&(r+="<b><i>maior que:</i></b> "+g.anoFonteRecursoMIN+", "),g.anoFonteRecursoMAX&&(r+="<b><i>menor que:</i></b> "+g.anoFonteRecursoMAX+", ")),(g.rendimentosFinanceirosReservasContasCorrentesPropriasMIN||g.rendimentosFinanceirosReservasContasCorrentesPropriasMAX)&&(r+="<b><i>Rendimentos financeiros de reservas ou contas correntes próprias</i></b> ",g.rendimentosFinanceirosReservasContasCorrentesPropriasMIN&&(r+="<b><i>maior que:</i></b> "+g.rendimentosFinanceirosReservasContasCorrentesPropriasMIN+", "),g.rendimentosFinanceirosReservasContasCorrentesPropriasMAX&&(r+="<b><i>menor que:</i></b> "+g.rendimentosFinanceirosReservasContasCorrentesPropriasMAX+", ")),(g.rendimentosFundosPatrimoniaisMIN||g.rendimentosFundosPatrimoniaisMAX)&&(r+="<b><i>Rendimentos de fundos patrimoniais</i></b> ",g.rendimentosFundosPatrimoniaisMIN&&(r+="<b><i>maior que:</i></b> "+g.rendimentosFundosPatrimoniaisMIN+", "),g.rendimentosFundosPatrimoniaisMAX&&(r+="<b><i>menor que:</i></b> "+g.rendimentosFundosPatrimoniaisMAX+", ")),(g.mensalidadesContribuicoesAssociadosMIN||g.mensalidadesContribuicoesAssociadosMAX)&&(r+="<b><i>Mensalidades ou contribuições de associados</i></b> ",g.mensalidadesContribuicoesAssociadosMIN&&(r+="<b><i>maior que:</i></b> "+g.mensalidadesContribuicoesAssociadosMIN+", "),g.mensalidadesContribuicoesAssociadosMAX&&(r+="<b><i>menor que:</i></b> "+g.mensalidadesContribuicoesAssociadosMAX+", ")),(g.vendaBensDireitosMIN||g.vendaBensDireitosMAX)&&(r+="<b><i>Venda de bens e direitos</i></b> ",g.vendaBensDireitosMIN&&(r+="<b><i>maior que:</i></b> "+g.vendaBensDireitosMIN+", "),g.vendaBensDireitosMAX&&(r+="<b><i>menor que:</i></b> "+g.vendaBensDireitosMAX+", ")),(g.premiosRecebidosMIN||g.premiosRecebidosMAX)&&(r+="<b><i>Prêmios recebidos</i></b> ",g.premiosRecebidosMIN&&(r+="<b><i>maior que:</i></b> "+g.premiosRecebidosMIN+", "),g.premiosRecebidosMAX&&(r+="<b><i>menor que:</i></b> "+g.premiosRecebidosMAX+", ")),(g.vendaProdutosMIN||g.vendaProdutosMAX)&&(r+="<b><i>Venda de produtos</i></b> ",g.vendaProdutosMIN&&(r+="<b><i>maior que:</i></b> "+g.vendaProdutosMIN+", "),g.vendaProdutosMAX&&(r+="<b><i>menor que:</i></b> "+g.vendaProdutosMAX+", ")),(g.prestacaoServicosMIN||g.prestacaoServicosMAX)&&(r+="<b><i>Prestação de serviços</i></b> ",g.prestacaoServicosMIN&&(r+="<b><i>maior que:</i></b> "+g.prestacaoServicosMIN+", "),g.prestacaoServicosMAX&&(r+="<b><i>menor que:</i></b> "+g.prestacaoServicosMAX+", ")),(g.empresasPublicasSociedadesEconomiaMistaMIN||g.empresasPublicasSociedadesEconomiaMistaMAX)&&(r+="<b><i>Empresas públicas ou sociedades de economia mista</i></b> ",g.empresasPublicasSociedadesEconomiaMistaMIN&&(r+="<b><i>maior que:</i></b> "+g.empresasPublicasSociedadesEconomiaMistaMIN+", "),g.empresasPublicasSociedadesEconomiaMistaMAX&&(r+="<b><i>menor que:</i></b> "+g.empresasPublicasSociedadesEconomiaMistaMAX+", ")),(g.acordoOrganismosMultilateraisMIN||g.acordoOrganismosMultilateraisMAX)&&(r+="<b><i>Acordo com organismos multilaterais</i></b> ",g.acordoOrganismosMultilateraisMIN&&(r+="<b><i>maior que:</i></b> "+g.acordoOrganismosMultilateraisMIN+", "),g.acordoOrganismosMultilateraisMAX&&(r+="<b><i>menor que:</i></b> "+g.acordoOrganismosMultilateraisMAX+", ")),(g.parceriaGovernoFederalMIN||g.parceriaGovernoFederalMAX)&&(r+="<b><i>Transferências federais recebidas pela OSC</i></b> ",g.parceriaGovernoFederalMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaGovernoFederalMIN+", "),g.parceriaGovernoFederalMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaGovernoFederalMAX+", ")),(g.parceriaGovernoEstadualMIN||g.parceriaGovernoEstadualMAX)&&(r+="<b><i>Parceria com o governo estadual</i></b> ",g.parceriaGovernoEstadualMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaGovernoEstadualMIN+", "),g.parceriaGovernoEstadualMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaGovernoEstadualMAX+", ")),(g.parceriaGovernoMunicipalMIN||g.parceriaGovernoMunicipalMAX)&&(r+="<b><i>Parceria com o governo municipal</i></b> ",g.parceriaGovernoMunicipalMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaGovernoMunicipalMIN+", "),g.parceriaGovernoMunicipalMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaGovernoMunicipalMAX+", ")),(g.acordoGovernosEstrangeirosMIN||g.acordoGovernosEstrangeirosMAX)&&(r+="<b><i>Acordo com governos estrangeiros</i></b> ",g.acordoGovernosEstrangeirosMIN&&(r+="<b><i>maior que:</i></b> "+g.acordoGovernosEstrangeirosMIN+", "),g.acordoGovernosEstrangeirosMAX&&(r+="<b><i>menor que:</i></b> "+g.acordoGovernosEstrangeirosMAX+", ")),(g.parceriaOscBrasileirasMIN||g.parceriaOscBrasileirasMAX)&&(r+="<b><i>Parceria com OSCs brasileiras</i></b> ",g.parceriaOscBrasileirasMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaOscBrasileirasMIN+", "),g.parceriaOscBrasileirasMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaOscBrasileirasMAX+", ")),(g.parceriaOscEstrangeirasMIN||g.parceriaOscEstrangeirasMAX)&&(r+="<b><i>Parceria com OSCs estrangeiras</i></b> ",g.parceriaOscEstrangeirasMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaOscEstrangeirasMIN+", "),g.parceriaOscEstrangeirasMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaOscEstrangeirasMAX+", ")),(g.parceriaOrganizacoesReligiosasBrasileirasMIN||g.parceriaOrganizacoesReligiosasBrasileirasMAX)&&(r+="<b><i>Parceria com organizações religiosas brasileiras</i></b> ",g.parceriaOrganizacoesReligiosasBrasileirasMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaOrganizacoesReligiosasBrasileirasMIN+", "),g.parceriaOrganizacoesReligiosasBrasileirasMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaOrganizacoesReligiosasBrasileirasMAX+", ")),(g.parceriaOrganizacoesReligiosasEstrangeirasMIN||g.parceriaOrganizacoesReligiosasEstrangeirasMAX)&&(r+="<b><i>Parceria com organizações religiosas estrangeiras</i></b> ",g.parceriaOrganizacoesReligiosasEstrangeirasMIN&&(r+="<b><i>maior que:</i></b> "+g.parceriaOrganizacoesReligiosasEstrangeirasMIN+", "),g.parceriaOrganizacoesReligiosasEstrangeirasMAX&&(r+="<b><i>menor que:</i></b> "+g.parceriaOrganizacoesReligiosasEstrangeirasMAX+", ")),(g.empresasPrivadasBrasileirasMIN||g.empresasPrivadasBrasileirasMAX)&&(r+="<b><i>Empresas privadas brasileiras</i></b> ",g.empresasPrivadasBrasileirasMIN&&(r+="<b><i>maior que:</i></b> "+g.empresasPrivadasBrasileirasMIN+", "),g.empresasPrivadasBrasileirasMAX&&(r+="<b><i>menor que:</i></b> "+g.empresasPrivadasBrasileirasMAX+", ")),(g.EmpresasEstrangeirasMIN||g.EmpresasEstrangeirasMAX)&&(r+="<b><i>Empresas estrangeiras</i></b> ",g.EmpresasEstrangeirasMIN&&(r+="<b><i>maior que:</i></b> "+g.EmpresasEstrangeirasMIN+", "),g.EmpresasEstrangeirasMAX&&(r+="<b><i>menor que:</i></b> "+g.EmpresasEstrangeirasMAX+", ")),(g.doacoesPessoaJuridicaMIN||g.doacoesPessoaJuridicaMAX)&&(r+="<b><i>Doações de pessoa jurídica</i></b> ",g.doacoesPessoaJuridicaMIN&&(r+="<b><i>maior que:</i></b> "+g.doacoesPessoaJuridicaMIN+", "),g.doacoesPessoaJuridicaMAX&&(r+="<b><i>menor que:</i></b> "+g.doacoesPessoaJuridicaMAX+", ")),(g.doacoesPessoaFisicaMIN||g.doacoesPessoaFisicaMAX)&&(r+="<b><i>Doações de pessoa física</i></b> ",g.doacoesPessoaFisicaMIN&&(r+="<b><i>maior que:</i></b> "+g.doacoesPessoaFisicaMIN+", "),g.doacoesPessoaFisicaMAX&&(r+="<b><i>menor que:</i></b> "+g.doacoesPessoaFisicaMAX+", ")),(g.doacoesRecebidasFormaProdutosServicosComNFMIN||g.doacoesRecebidasFormaProdutosServicosComNFMAX)&&(r+="<b><i>Doações recebidas na forma de produtos e serviços (com NF)</i></b> ",g.doacoesRecebidasFormaProdutosServicosComNFMIN&&(r+="<b><i>maior que:</i></b> "+g.doacoesRecebidasFormaProdutosServicosComNFMIN+", "),g.doacoesRecebidasFormaProdutosServicosComNFMAX&&(r+="<b><i>menor que:</i></b> "+g.doacoesRecebidasFormaProdutosServicosComNFMAX+", ")),(g.voluntariadoMIN||g.voluntariadoMAX)&&(r+="<b><i>Voluntariado</i></b> ",g.voluntariadoMIN&&(r+="<b><i>maior que:</i></b> "+g.voluntariadoMIN+", "),g.voluntariadoMAX&&(r+="<b><i>menor que:</i></b> "+g.voluntariadoMAX+", ")),(g.isencoesMIN||g.isencoesMAX)&&(r+="<b><i>Isenções:</i></b> ",g.isencoesMIN&&(r+="<b><i>maior que:</i></b> "+g.isencoesMIN+", "),g.isencoesMAX&&(r+="<b><i>menor que:</i></b> "+g.isencoesMAX+", ")),(g.imunidadesMIN||g.imunidadesMAX)&&(r+="<b><i>Imunidades</i></b> ",g.imunidadesMIN&&(r+="<b><i>maior que:</i></b> "+g.imunidadesMIN+", "),g.imunidadesMAX&&(r+="<b><i>menor que:</i></b> "+g.imunidadesMAX+", ")),(g.bensRecebidosDireitoUsoMIN||g.bensRecebidosDireitoUsoMAX)&&(r+="<b><i>Bens recebidos em direito de uso</i></b> ",g.bensRecebidosDireitoUsoMIN&&(r+="<b><i>maior que:</i></b> "+g.bensRecebidosDireitoUsoMIN+", "),g.bensRecebidosDireitoUsoMAX&&(r+="<b><i>menor que:</i></b> "+g.bensRecebidosDireitoUsoMAX+", ")),(g.doacoesRecebidasFormaProdutosServicosSemNFMIN||g.doacoesRecebidasFormaProdutosServicosSemNFMAX)&&(r+="<b><i>Doações recebidas na forma de produtos e serviços (sem NF)</i></b> ",g.doacoesRecebidasFormaProdutosServicosSemNFMIN&&(r+="<b><i>maior que:</i></b> "+g.doacoesRecebidasFormaProdutosServicosSemNFMIN+", "),g.doacoesRecebidasFormaProdutosServicosSemNFMAX&&(r+="<b><i>menor que:</i></b> "+g.valorMAX+", ")));var _=e.IDH;_&&_.IDH_Municipal&&(r+="<b><i>Índice de Desenvolvimento Humano:</i></b> IDH Municipal - Faixa: ",_.baixo&&(r+="baixa, "),_.medio&&(r+="médio, "),_.alto&&(r+="alto, ")),$("#filtros p").html(r)}}(S.avancado,V)}else console.log("ERRO de URL!")}else V="todos",H=Z.ClusterPais(),urlRota=Z.AllOSC(0);if(X){var ia="Análise "+T;$("#analisePerfil").text(ia),$("#analisePerfil").attr("href","analise-perfil.html?localidade="+_);var ra='<img src="img/'+P+'" alt="" height=40>';$("#analisePerfil").append(ra)}var ta=L.control(),na=L.control({position:"bottomright"});$("#loadingMapModal").show();var sa;j?(type_http="POST",sa=S):(type_http="GET",sa=null),$.ajax({url:H,type:type_http,dataType:"json",data:sa,error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(""!==a&&void 0!==a&&"Nenhuma Organização encontrada!"!==a){e(urlRota,j);var o=0,r=a;if(a.lista_osc&&(r=a.lista_osc),O){if(void 0!==r.length)for(var t=0;t<r.length;t++)o+=r[t].nr_quantidade_osc_regiao;l(o),$("#legenda p").append(o),d(r,V)}else l(o=Object.keys(r).length-1),$("#legenda p").append(o),i(r),j&&$("#export button").click(function(){$("#modal_loading").modal("show"),setTimeout(function(){var o={};o.variaveis_adicionais=B,a.chave_cache_exportar&&(o.chave=a.chave_cache_exportar),$.ajax({url:Z.ExportarDadosConsulta(),type:"POST",dataType:"json",async:!1,data:o,error:function(a){$("#modal_loading").modal("hide"),$("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Limite para exportação excedido!"),$("#modalConteudo").html('<p>A consulta excedeu o limite para exportação.</p><br><p>Adicione mais filtros ou realize o download completo da base do Mapa das OSCs no link <a title="Link para a Base de Dados." href="/base-dados.html" target="_blank">Base de Dados</a></p>'),$("#modalMensagem button").attr("onclick",""),$("#modalMensagem").modal("show")},success:function(a){console.log(a);var o=function(a){var o,e,i,r,t,n;return null!=(n=a.data||null)&&n.length?(r=a.columnDelimiter||";",t=a.lineDelimiter||"\n",i=Object.keys(n[0]),o="",o+=i.join(r),o+=t,n.forEach(function(a){e=0,i.forEach(function(i){e>0&&(o+=r),o+=a[i],e++}),o+=t}),o):null}({data:a});var e=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(!e){o="\ufeff"+o}var i=new Blob([o],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"}),r=window.URL.createObjectURL(i),t=document.getElementById("download_report");window.navigator.msSaveOrOpenBlob||(t.href=r,t.download="exportacao_consulta.csv"),t.click(),$("#modal_loading").modal("hide")}})},1e3)})}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==V&&"municipio"!==V?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(Q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}}),$.ajax({url:Z.IDH(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX: "+a)},success:function(a){console.log(a),function(a){function o(a){m.resetStyle(a.target),ca.update(null)}m=L.geoJson(a,{style:function(a){return{fillColor:c(a.properties.nr_valor),weight:.5,opacity:1,color:"white",dashArray:"1",fillOpacity:.9}}.bind(this),onEachFeature:function(a,e){C.addLayer(e),e.on({mouseover:function(a){var o=a.target;o.setStyle({weight:2,color:"#667",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||o.bringToFront(),"GO"==o.feature.properties.Name&&o.bringToBack(),ca.update(o.feature.properties,"uf")},mouseout:o,click:function(a){var e=a.target;G.fitBounds(e.getBounds()),console.log(a.target.feature),function(a){$("#loadingMapModal").show(),$.ajax({url:Z.IDHM(a),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX: "+a)},success:function(a){console.log(a),function(a){function o(a){var o=a.target;o.setStyle({weight:2,color:"#667",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||o.bringToFront(),"GO"==o.feature.properties.Name&&o.bringToBack(),ca.update(o.feature.properties,"municipio")}function e(a){b.resetStyle(a.target),ca.update(null)}b=L.geoJson(a,{style:function(a){return{fillColor:c(a.properties.nr_valor),weight:.5,opacity:1,color:"white",dashArray:"1",fillOpacity:.9}}.bind(this),onEachFeature:function(a,i){I.addLayer(i),C.addLayer(I),i.on({mouseover:o,mouseout:e,click:function(a){var i=a.target;G.fitBounds(i.getBounds()),i.off(),i.on({mouseover:o,mouseout:e,click:n})}})}})}(a),$("#loadingMapModal").hide()}})}(a.target.feature.properties.cod_uf),e.off(),e.on({mouseout:o,click:n})}})}})}(a),v=!0,u()}});var ca=L.control(),da=L.control({position:"bottomright"});ca.onAdd=function(a){return this._div=L.DomUtil.create("div","info"),this.update(null,"none"),this._div},ca.update=function(a,o){var e="uf"===o?"nm_uf":"nm_municipio",i="uf"===o?"IDH":"IDHM";this._div.innerHTML="<h4>"+i+"</h4>"+(a?"<b>"+a[e]+"</b><br />"+a.nr_valor:"Passe o mouse sobre um territorio")},da.onAdd=function(a){var o=L.DomUtil.create("div","info legend");return o.innerHTML+="<h5>Escala de IDH</h5>",o.innerHTML+='<i style="background:'+c(.499)+'"></i> 0 - 0.499 <br><i style="background:'+c(.599)+'"></i> 0.500 - 0.599 <br><i style="background:'+c(.699)+'"></i> 0.600 - 0.699 <br><i style="background:'+c(.799)+'"></i> 0.700 - 0.799 <br><i style="background:'+c(.8)+'"></i> 0.800 - 1',o};L.control(),L.control({position:"bottomright"});$.ajax({url:Z.ClusterEstado(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(void 0!==a){var o={},c={};if(a.lista_osc)for(var m in a.lista_osc)o[a.lista_osc[m].tx_sigla_regiao]=a.lista_osc[m].nr_quantidade_osc_regiao,c[a.lista_osc[m].tx_sigla_regiao]=a.lista_osc[m].id_regiao;else for(var m in a)o[a[m].tx_sigla_regiao]=a[m].nr_quantidade_osc_regiao,c[a[m].tx_sigla_regiao]=a[m].id_regiao;f=!0,u(),G.addControl(L.control.groupedLayers({"Satélite":J,Contraste:k,Mapa:w},{"Mapa de calor":{OSC:x,IDH:C}},{collapsed:!1,exclusiveGroups:["Mapa de calor"],groupCheckboxes:!0})),function(a,o){var c;$.each(statesData.features,function(e){c=statesData.features[e].properties.Name,statesData.features[e].properties.density=a[c],statesData.features[e].properties.id=o[c]}),G.addLayer(x),ta.onAdd=function(a){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},ta.update=function(a){this._div.innerHTML="<h4>OSCs por Estado</h4>"+(a?"<b>"+a.Name+"</b><br />"+a.density+" OSCs.":"Passe o mouse sobre um estado")},ta.addTo(G),na.onAdd=function(a){var o=L.DomUtil.create("div","info legend"),e=[0,1e3,15e3,3e4,45e3,6e4];o.innerHTML+="<h5>Escala de OSCs por estado</h5>";for(var i=0;i<e.length;i++)o.innerHTML+='<i style="background:'+s(e[i]+1)+'"></i> '+parseInt(e[i]+1)+(e[i+1]?"&ndash;"+e[i+1]+"<br>":"+");return o},na.addTo(G),p=L.geoJson(statesData,{style:function(a){return{fillColor:s(a.properties.density),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.6}},onEachFeature:function(a,o){o.on({mouseover:r,mouseout:t,click:function(a){console.log("clicado zoomToFeature");var o=a.target;if(G.fitBounds(o.getBounds()),function(a){$("#loadingMapModal").show(),$.ajax({url:Z.OSCByStateInMap(a),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(e(urlRota,j),void 0!==a.length){for(var o=0,r=0;r<a.length;r++)o+=a[r].nr_quantidade_osc_regiao;l(o)}else l(Object.keys(a).length-1);void 0!==a&&i(a)}})}(o.feature.properties.id),void 0==R[o.feature.properties.Regiao]){var s=y[o.feature.properties.id];void 0!=s&&G.removeLayer(s)}else!function(a){var o=a.feature.properties.Regiao;$("#loadingMapModal").show(),$.ajax({url:Z.ClusterEstadoPorRegiao(o),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(i){if(e(urlRota,j),void 0!==i.length){for(var r=0,t=0;t<i.length;t++)r+=i[t].nr_quantidade_osc_regiao;l(r)}else l(Object.keys(i).length-1);if(void 0!==i){d(i,"estado");var n=R[o];G.removeLayer(n),delete R[o];var s=y[a.feature.properties.id];G.removeLayer(s)}}})}(o);o.off(),o.on({mouseover:r,mouseout:t,click:n})}}),x.addLayer(o),A[o.feature.properties.id]=o,h[o.feature.properties.id]=o}}).addTo(G)}(o,c)}}}),G.on("zoomend",function(a){G.getZoom()==F&&(G.removeLayer(x),G.removeLayer(C))});var la=!0;G.on("overlayadd",function(a){"OSC"!==a.name||la||(ta.addTo(G),na.addTo(G),G.removeControl(ca),G.removeControl(da)),"IDH"!==a.name||la||(ca.addTo(G),da.addTo(G),G.removeControl(ta),G.removeControl(na)),la=!1})});