"use strict";var _createClass=function(){function e(e,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(s,r,o){return r&&e(s.prototype,r),o&&e(s,o),s}}();function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var FonteRecurso=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"montarPorAno",value:function(e,s,r,o,c,n,t,a,i,u,p,d,l,_,f,h){var b=$.grep(u,function(e){return 1==e.cd_origem_fonte_recursos_osc}),v=$.grep(u,function(e){return 2==e.cd_origem_fonte_recursos_osc}),x=$.grep(u,function(e){return 4==e.cd_origem_fonte_recursos_osc}),m=$.grep(u,function(e){return 3==e.cd_origem_fonte_recursos_osc});$("#recursos").append("<div id="+e+"></div>"),0!==t&&$("#"+e).toggleClass("hidden");var k=p.items;f=l.createFactory(f),_.render(f({dados:k,ano:e}),document.getElementById(e)),k=d.recursos_geral;for(var g=[],y=0;y<k.length;y++)g.push(i.FormItens("ano-"+e,k[y].label,e,k[y].fonte,k[y].placeholder,k[y].type,k[y].options,k[y].pretext,k[y].custom_class));h=l.createFactory(h),_.render(h({header:null,dados:g}),document.getElementById("recursos_geral-"+e)),d.recursos_nao_financeiros=this.mapContentRecursos(a.recursos_nao_financeiros,m),d.recursos_privados=this.mapContentRecursos(a.recursos_privados,v),d.recursos_proprios=this.mapContentRecursos(a.recursos_proprios,x),d.recursos_publicos=this.mapContentRecursos(a.recursos_publicos,b);for(var C=[{items:d.recursos_proprios,divId:"recursos_proprios"},{items:d.recursos_publicos,divId:"recursos_publicos"},{items:d.recursos_privados,divId:"recursos_privados"},{items:d.recursos_nao_financeiros,divId:"recursos_nao_financeiros"}],R=0;R<C.length;R++){g=[],k=C[R].items;var I=C[R].divId;for(y=0;y<k.length;y++){var F=k[y].content;""!==F&&null!==F&&-1===F.indexOf(".")&&(F+="00"),g.push(i.FormItens(k[y].id,k[y].label,F,k[y].fonte,k[y].placeholder,k[y].type,k[y].options,k[y].pretext))}h=l.createFactory(h),_.render(h({header:null,dados:g}),document.getElementById(I+"-"+e))}$("#recursos_proprios-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_proprios-"+e).find("input").addClass("with-pretext"),$("#recursos_proprios-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_publicos-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_publicos-"+e).find("input").addClass("with-pretext"),$("#recursos_publicos-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_privados-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_privados-"+e).find("input").addClass("with-pretext"),$("#recursos_privados-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_nao_financeiros-"+e).find("input").mask("000.000.000.000.000,00",{reverse:!0}),$("#recursos_nao_financeiros-"+e).find("input").addClass("with-pretext"),$("#recursos_nao_financeiros-"+e).find(".input-box").prepend('<span class="pretext">R$</span>'),$("#recursos_geral-"+e).append('<div class="input-box checkbox"><label><input type="checkbox">Não possui recursos para este ano.</label></div>'),$("#recursos_proprios-"+e).prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui recursos próprios para este ano.</label></div>'),$("#recursos_publicos-"+e).prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui recursos públicos para este ano.</label></div>'),$("#recursos_privados-"+e).prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui recursos privados para este ano.</label></div>'),$("#recursos_nao_financeiros-"+e).prepend('<div class="input-box checkbox"><label><input type="checkbox">Não possui recursos não financeiros para este ano.</label></div>'),$("#recursos_geral-"+e+' input[type="checkbox"]').prop("checked",s),$("#recursos_proprios-"+e+' input[type="checkbox"]').prop("checked",r),$("#recursos_publicos-"+e+' input[type="checkbox"]').prop("checked",o),$("#recursos_privados-"+e+' input[type="checkbox"]').prop("checked",c),$("#recursos_nao_financeiros-"+e+' input[type="checkbox"]').prop("checked",n),$('#recursos input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)})}},{key:"carregaFontes",value:function(e){var s=null;return $.ajax({url:"js/controller.php",async:!1,type:"GET",dataType:"json",data:{flag:"consulta",rota:e.FontesRecursos()},success:function(e){s=e},error:function(e){console.log(e)}}),s}},{key:"montarFontedeRecursos",value:function(e,s,r,o,c,n,t,a){for(var i=o.itemsRecurso(),u=o.tiposRecurso(),p=this.carregaFontes(r),d=0;d<e.recursos.recursos.length;d++)this.montarPorAno(e.recursos.recursos[d].dt_ano_recursos_osc,e.recursos.recursos[d].bo_nao_possui,e.recursos.recursos[d].bo_nao_possui_recursos_proprios,e.recursos.recursos[d].bo_nao_possui_recursos_publicos,e.recursos.recursos[d].bo_nao_possui_recursos_privados,e.recursos.recursos[d].bo_nao_possui_recursos_nao_financeiros,d,e.recursos.recursos[d],s,p,i,u,c,n,t,a);$(".select-ano").find(".form-control").bind("change",function(){var e=$(this).val(),s=$(this).attr("id").slice(4);$("#"+e).hasClass("hidden")&&($("#"+e).toggleClass("hidden"),$("#"+e).siblings().addClass("hidden")),$(this).find("option[value="+s+"]").prop("selected",!0)})}},{key:"mapContentRecursos",value:function(e,s){for(var r=0;r<s.length;r++){var o=s[r];for(var c in o.id=o.cd_fonte_recursos_osc,o.label=o.tx_nome_fonte_recursos_osc,o.content="",o.placeholder="Insira o valor",e){var n=e[c];e.hasOwnProperty(c)&&n.cd_fonte_recursos_osc===o.cd_fonte_recursos_osc&&(o.content=n.nr_valor_recursos_osc,o.fonte=n.ft_valor_recursos_osc)}}return s}}]),e}();