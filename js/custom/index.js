"use strict";require(["jquery-ui"],function(a){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,e){$(this).css(a),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}}}),jQuery(document).ready(function(a){a(".scroll").click(function(e){e.preventDefault(),a("html,body").animate({scrollTop:a(this.hash).offset().top},800)})})}),require(["rotas","nv.d3.lib","graficoParaTabela"],function(a){for(var e=new Rotas,t=[9,10,11,12],o=0;o<t.length;o++)$.ajax({url:e.RecuperarGrafico(t[o]),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if(null!=a){var e="",t="Elaboração própria.",r=o+1;e+='<div class="container"><div class="row"><div class="col-md-12"><hr>',e+='<h2 class="text-center">'+a.titulo+"</h2>",e+='</div></div><div class="row"><div class="col-md-12"><hr></div></div>',e+='<div class="row"><div class="col-md-12"><div class="chart-container" id="graficoMain-'+r+'"><svg></svg></div>',null!=a.fontes&&(t=a.fontes.join(", "),t+="."),e+="<h5>Fonte: "+t+"</h5>",e+="<h5>"+a.legenda+"</h5>",e+='<h5><a id="tabelaMain-'+r+'" class="btn-item" data-toggle="modal" title="Mostrar os dados em Tabela.">Visualize os dados em tabela.</a></h5>',e+='</div></div><a href="#header" name="header" class="scroll topo">Voltar para o topo</a></div>',$("#itemGrafico").append(e),escolherGrafico(r,a)}}})}),require(["rotas","bootstrap","jquery-ui"],function(a){function e(a){return a=a.replace(/[ÀÁÂÃÄÅ]/g,"A"),a=a.replace(/[àáâãäå]/g,"a"),a=a.replace(/[ÉÈÊË]/g,"E"),a=a.replace(/[éèêë]/g,"e"),a=a.replace(/[ÍÌÎÏ]/g,"I"),a=a.replace(/[íìîï]/g,"i"),a=a.replace(/[ÓÒÔÕ]/g,"O"),a=a.replace(/[óòôõ]/g,"o"),a=a.replace(/[ÚÙÛÜ]/g,"U"),a=a.replace(/[úùûü]/g,"u"),a=a.replace(/[Ç]/g,"C"),a=a.replace(/[ç]/g,"c")}var t=new Rotas;$.ajax({url:t.ModuloWebdoors(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a),$(".loading").addClass("hide")},success:function(a){var e="";if(a.length>0)for(var t in a){var o="",r="";0==t?(o+='<li data-target="#carousel-topo" data-slide-to="'+t+'" class="active"></li>',r+='<div class="item active">'):(o+='<li data-target="#carousel-topo" data-slide-to="'+t+'"></li>',r+='<div class="item">'),e=null!=a[t].tx_imagem_webdoor&&""!=a[t].tx_imagem_webdoor?"/cms/imagens/webdoors/"+a[t].tx_imagem_webdoor:"img/item_cms.png",r+='<a class="btn-item" href="'+a[t].tx_link_webdoor+'">',r+='<img src="'+e+'"  onerror="this.src=\'img/item_cms.png\';" alt="" title="Link para '+a[t].tx_titulo_webdoor+'">',r+='<div class="carousel-caption"><h4 class="legenda">'+a[t].tx_legenda_webdoor+"</h4></div>",null!=a[t].tx_descricao_webdoor&&""!=a[t].tx_descricao_webdoor&&(r+='<div class="carousel-caption carousel-descricao"><div">'+a[t].tx_descricao_webdoor+"</div></div>"),r+="</a></div>",$(".carousel-indicators").append(o),$(".carousel-inner").append(r)}$(".loading").addClass("hide")}});var r="",c=$(".tab-content");c.find(".btn.btn-primary").on("click",function(){var a=c.find(".tab-pane.fade.active.in"),t=a.attr("id"),o=a.find(".form-control").val();o=e(o.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_");var r;"organizacao"==t&&""!==o?(r="./resultado-consulta.html?"+t+"="+o+"&tipoBusca=0",location.href=r):""!==(o=$(".response").val())?(r="./resultado-consulta.html?"+t+"="+o,location.href=r):$("#errorLabel").removeClass("hide")}),$("#organizacao .form-control").autocomplete({minLength:3,source:function(a,c){r=e(a.term.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),$.ajax({url:t.AutocompleteOSCByName(r,10,0),type:"GET",dataType:"json",success:function(a){c($.map(a,function(a){return{label:a.tx_nome_osc,value:a.tx_nome_osc,id:a.id_osc}}))},error:function(a){c([])}})},select:function(a,t){var o="./resultado-consulta.html?organizacao="+e(t.item.value.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_")+"&tipoBusca=1";location.href=o}}),$("#municipio .form-control").autocomplete({minLength:3,source:function(a,r){$.ajax({url:o,type:"GET",dataType:"json",data:{flag:"autocomplete",rota:t.AutocompleteOSCByCounty(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),25)},success:function(a){r($.map(a,function(a){return{label:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,value:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,id:a.edmu_cd_municipio}}))},error:function(a){r([])}})},select:function(a,e){$(".response").val(e.item.id);var t="./resultado-consulta.html?municipio="+e.item.id;location.href=t}}),$("#estado .form-control").autocomplete({minLength:3,source:function(a,r){$.ajax({url:o,type:"GET",dataType:"json",data:{flag:"autocomplete",rota:t.AutocompleteOSCByState(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10)},success:function(a){r($.map(a,function(a){return{label:a.eduf_nm_uf,value:a.eduf_nm_uf,id:a.eduf_cd_uf}}))},error:function(){r([])}})},select:function(a,e){$(".response").val(e.item.id);var t="./resultado-consulta.html?estado="+e.item.id;location.href=t}}),$("#regiao .form-control").autocomplete({minLength:3,source:function(a,r){$.ajax({url:o,type:"GET",dataType:"json",data:{flag:"autocomplete",rota:t.AutocompleteOSCByRegion(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10)},success:function(a){r($.map(a,function(a){return{label:a.edre_nm_regiao,value:a.edre_nm_regiao,id:a.edre_cd_regiao}}))},error:function(){r([])}})},select:function(a,e){$(".response").val(e.item.id);var t="./resultado-consulta.html?regiao="+e.item.id;location.href=t}}),$(document).ready(function(){function a(){var a=window.localStorage.getItem("cd_localidade");""!=a&&null!=a&&void 0!=a||$("#modalLocalidade").modal("show"),l()}function e(){var a=0,e=0,t="",o=$(".MultiCarousel").width(),r=$("body").width();$(".MultiCarousel-inner").each(function(){e+=1;var c=$(this).find(".item").length,l=$(this).parent().attr("data-items");t=l.split(","),$(this).parent().attr("id","MultiCarousel"+e),r>=1200?(a=t[3],i=30+o/a):r>=992?(a=t[2],i=o/a):r>=768?(a=t[2],i=o/a):r>=400?(a=t[1],i=o/a):(a=t[0],i=o/a),$(this).css({transform:"translateX(0px)",width:i*c}),$(this).find(".item").each(function(){$(this).outerWidth(i)}),$(".leftLst").addClass("over"),$(".rightLst").removeClass("over")})}function r(a,e){var t="#"+$(e).parent().attr("id");!function(a,e,t){var o=".MultiCarousel-inner",r="",c=$(e+" "+o).css("transform").match(/-?[\d\.]+/g),l=Math.abs(c[4]);if(0==a)r=parseInt(l)-parseInt(i*t),$(e+" .rightLst").removeClass("over"),r<=i/2&&(r=0,$(e+" .leftLst").addClass("over"));else if(1==a){var n=$(e).find(o).width()-$(e).width();r=parseInt(l)+parseInt(i*t),$(e+" .leftLst").removeClass("over"),r>=n-i/2&&(r=n,$(e+" .rightLst").addClass("over"))}$(e+" "+o).css("transform","translateX("+-r+"px)")}(a,t,$(t).attr("data-slide"))}function c(a,e){$.ajax({url:o,type:"GET",async:!1,dataType:"json",data:{flag:"consulta",rota:function(a){var e=window.localStorage.getItem("cd_localidade"),o=window.localStorage.getItem("cd_latitude"),r=window.localStorage.getItem("cd_longitude");return void 0!=o&&null!=o&&""!=o&&void 0!=r&&null!=r&&""!=r?t.RecuperarOscPorGeolocalizacaoAreaAtuacao(a,o,r):void 0!=e&&null!=e&&""!=e?t.RecuperarOscPorLocalidadeAreaAtuacao(a,e):t.RecuperarOscPorAreaAtuacao(a)}(a)},error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){$("#loading_top_5").hide();var t='<center><h5 style="padding-top: 0px;"><b>'+e+"</b></h5></center>";t+='<div class="table-responsive">',t+='<table class="table table-hover">';var o="<tbody>";if(null!=a&&0!==a.length){for(var r=0;r<a.length&&r<5;r++){o+="<tr>",o+='<th scope="row">'+(r+1)+"</th>",o+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[r].id_osc+"';\" >"+a[r].tx_nome_osc+"</a></td>",o+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[r].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',o+="</tr>"}o+="</tbody>"}else o+="<tr>",o+='<th scope="row"><center>Nenhuma OSC encontrada.</center></th>',o+="</tr>";t+=o+"</table></div>",$("#top_5_area_atuacao").html(t)}})}function l(){$.ajax({url:o,type:"GET",async:!0,dataType:"json",data:{flag:"consulta",rota:t.AreaAtuacao()},error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){var t="";if(null!=a&&void 0!==a.length){for(var o,l="",i=0;i<a.length;i++)1!=a[i].cd_area_atuacao&&10!=a[i].cd_area_atuacao&&(2==a[i].cd_area_atuacao?(l+='<div class="item active">',o=a[i].cd_area_atuacao,t=a[i].tx_nome_area_atuacao):l+='<div class="item">',l+='<div class="col-xs-12"><a class="btn-item" data-btn='+a[i].cd_area_atuacao+" <center>",l+='<img class="imgAreaAtuacao" src="img/area_atuacao_'+a[i].cd_area_atuacao+'.png" >',l+="<h5><b>"+a[i].tx_nome_area_atuacao+"</b></h5></center></a></div></div>");$(".MultiCarousel-inner").append(l),$(".leftLst, .rightLst").click(function(){$(this).hasClass("leftLst")?r(0,this):r(1,this)}),e(),$(window).resize(function(){e()}),$(".MultiCarousel .item a").on("click",function(){o=$(this).attr("data-btn"),t=$(this).text(),c(o,t)}),c(o,t)}}})}var i="";navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var r=e.coords.latitude,c=e.coords.longitude;void 0!=r&&null!=r&&""!=r&&void 0!=c&&null!=c&&""!=c?(window.localStorage.setItem("cd_latitude",r.toLocaleString("PT")),window.localStorage.setItem("cd_longitude",c.toLocaleString("PT")),$.ajax({url:o,type:"GET",async:!0,dataType:"json",data:{flag:"consulta",rota:t.RecuperarMunicipio(r,c)},error:function(e){a()},success:function(a){null!=a&&0!==a.length&&(window.localStorage.setItem("cd_localidade",a[0].cd_localidade),window.localStorage.setItem("nome_localidade",a[0].tx_nome_localidade),$("#btn-localidade").text(a[0].tx_nome_localidade)),l()}})):a()},function(e){a()}):a(),$(".ui-autocomplete-input").keypress(function(a){if(13==a.which)return $(".btn-primary").click(),$(".ui-menu-item").hide(),!1}),$.ajax({url:o,type:"GET",async:!1,dataType:"json",data:{flag:"consulta",rota:t.RecuperarOscAtualizacao()},error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if($("#loading_top_10").hide(),null!=a&&void 0!==a.length){var e='<div class="table-responsive">';e+='<table class="table table-hover">';for(var t="<tbody>",o=0;o<a.length&&o<10;o++){t+="<tr>",t+='<th scope="row">'+(o+1)+"</th>",t+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[o].id_osc+"';\" >"+a[o].tx_nome_osc+"</a></td>",t+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[o].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',t+="</tr>"}e+=(t+="</tbody>")+"</table></div>",$("#top_10_atualizacao").html(e)}}})})});
